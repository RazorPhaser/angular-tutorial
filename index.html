<!DOCTYPE html>
<html lang="en">

<head>
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Up and Running with Angular</title>


	<meta charset="utf-8">
	<meta name="description" content="Labs for Angular 2 Workshop">
	<meta name="author" content="Justin James">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<link href="css/style.css" rel="stylesheet">
</head>

<body>

	<div id="container">
		<div id="header">
			<a href="#" class="menu header-btn" id="toggle-toc"></a>
			<h1>Up and Running with Angular Workshop</h1>
			<a href="https://github.com/digitaldrummerj/angular-tutorial" class="github header-btn"></a>
		</div>
		<div id="content-container">
			<div id="toc">
				<div class="toc-heading">Table of Contents</div>
				<div id="toc-padding"></div>
			</div>
			<div id="book">
				<div class="chapter">
					<h2 id="introduction">Introduction</h2>
<p>Welcome to the Up and Running with Angular Workshop.  Angular 2 was released in September 2016 and was a full re-write of the framework.  With the re-write a lot has changed.   In this workshop, you will learn how to build an Angular UI from the ground up.  We will cover common UI requirements like navigation, footer, forms, Http API calls, routing, modules, and security.</p>
<h3 id="new-naming-convention">New Naming Convention</h3>
<p>The first thing is what to call Angular.  Angular 1 is now referred to as AngularJS.  Angular 2 and above is referred to as just Angular.  From here on out, we will just call it Angular.  The only time to refer to Angular with a version number is when you are talking about a feature that it specific to that version.  For example, in Angular 4, they add the TitleCase Pipe.</p>
<h3 id="release-schedule">Release Schedule</h3>
<p>The second thing is that they are now following SemVer for the versioning of Angular and have a release schedule.  For example, here is how version 2.3.1 would break down.</p>
<p><img src="images/semver.png" alt="SemVer"></p>
<p>Release Schedule:</p>
<ul>
<li>Major: Every 6 months</li>
<li>Minor: Every month</li>
<li>Patch: Every week</li>
</ul>
<h3 id="coming-from-angular-1">Coming from Angular 1</h3>
<p>Third, if you are coming from an Angular 1 background, it is best if you do not try to compare the concepts between Angular 1 and Angular 2+.  You will be able to learn Angular Just treat Angular 2 as a whole new framework  </p>
<h3 id="materials">Materials</h3>
<p><a href="https://github.com/digitaldrummerj/angular2-tutorial/tree/code">Completed Source Code</a></p>

				</div>
				<hr>
				<div class="chapter">
					<h2 id="getting-up-and-running">Getting up and running</h2>
<p>To get started, we need to install and configure the following software first.</p>
<ul>
<li>Windows, Mac, or Linux computer</li>
<li>Visual Studio Code (can use any text editor but workshop tested with Visual Studio Code)</li>
<li>Node 6.9+</li>
<li>Angular CLI 1.0.0+</li>
<li>Json Server (used to fake our API calls)</li>
</ul>
<h3 id="windows-showing-file-extensions">Windows Showing File Extensions</h3>
<div class="alert alert-danger" role="alert">
<strong>Windows Only</strong> 
</div>

<p><strong>Non-Windows users can <a href="#chapter2.2">skip to next section</a></strong></p>
<p>By default Windows is set to not show file extensions for known files which causes files such as .gitconfig and .npmrc to show up as just a period with no file extension which makes it extremely difficult to figure out what the file actually is.  To fix this we need to turn set Windows Explorer to show file extensions.</p>
<h4 class="exercise-start">
    <b>Exercise</b>: Turn On Windows Showing File Extensions
  </h4>


<ol>
<li>Open Windows Explorer</li>
<li><p>Click on the View Tab and select Options</p>
<p> <img src="images/chapter1/windows-explorer-ribbon.png" style="height:147px;width:759px;margin-left: 10px"></p>
</li>
</ol>
<p>Once the &quot;Folder Options&quot; dialog is open: </p>
<ol>
<li>Click on the View Tab</li>
<li>Uncheck the &quot;Hide extensions for known file types&quot;</li>
<li><p>Click Ok</p>
<p> <img src="images/chapter1/windows-explorer-view-options.png" style="height:475px;width:382px;margin-left: 10px"></p>
</li>
</ol>
<div class="exercise-end"></div>

<h3 id="visual-studio-code">Visual Studio Code</h3>
<p>Visual Studio Code is Microsoft lightweight cross platform IDE.  </p>
<ol>
<li>Download Visual Studio Code at <a href="https://code.visualstudio.com/">https://code.visualstudio.com/</a></li>
<li>Once the download finishes, launch the installer except all of the defaults.</li>
</ol>
<h3 id="node-js">Node.js</h3>
<p>NodeJS is used to power the Angular CLI as well as install all of our dependencies.  The Angular CLI requires Node version 6.9 or greater.</p>
<ol>
<li>Download the latest stable version (LTS) of <a href="http://nodejs.org">NodeJS</a> which as of this writing is 6.10.2.    </li>
<li>Run the installer and accept all defaults.</li>
<li><p>Verify that Node installed.  Start a command prompt or terminal window and run: </p>
<pre><code class="lang-bash"> node -v
</code></pre>
</li>
</ol>
<h3 id="angular-cli-install">Angular CLI Install</h3>
<p>The Angular CLI (Command Line Interface) makes it so that you do not have to worry about the Angular tooling and can focus instead on your code. You can create new projects, components, modules, services, guards, pipes and routes.  As well it has commands for linting, testing and running our code.  </p>
<p>All of the code that is generated by the Angular CLI following the Angular Style Guide.  </p>
<p>While you do not have to use the Angular CLI, it is highly recommended, will increase your productivity, and this workshop only gives the instructions for developing with the Angular CLI.  </p>
<h4 class="exercise-start">
    <b>Exercise</b>: Install Angular CLI
</h4>

<ol>
<li><p>Open a command prompt or terminal and run the following command</p>
<pre><code class="lang-bash"> npm install -g @angular/cli
</code></pre>
</li>
<li><p>Verify Angular CLI</p>
<pre><code> ng --version
</code></pre><p> <img src="images/chapter1/ng-version.png" alt="ng version output"></p>
</li>
</ol>
<div class="exercise-end"></div>

<h3 id="json-server-install">JSON Server Install</h3>
<p>JSON Server is a lightweight server to make REST api calls.  </p>
<h4 class="exercise-start">
    <b>Exercise</b>: Install JSON Server
</h4>

<ol>
<li><p>Open a command prompt or terminal and run the following command</p>
<pre><code class="lang-bash"> npm install -g json-server
</code></pre>
</li>
<li><p>Verify JSON Server.  As of this writing version is 0.10.0</p>
<pre><code> json-server --verion
</code></pre></li>
</ol>
<div class="exercise-end"></div>

				</div>
				<hr>
				<div class="chapter">
					<h2 id="create-new-project">Create New Project</h2>
<h3 id="generate-new-project">Generate New Project</h3>
<p>The project that the Angular CLI create for you follows all of the suggested standards and has webpack for bundling built-in to it.    </p>
<h4 class="exercise-start">
    <b>Exercise</b>: Create Angular Project
</h4>

<ol>
<li>Open a command prompt</li>
<li><p>Navigate to where you want to store your project files.  I use c:\projects on Windows and ~/projects on OSx.  You are free to use anywhere that you want. </p>
<ul>
<li><p>Windows:</p>
<pre><code class="lang-bash">  cd \
</code></pre>
</li>
<li><p>OSx:</p>
<pre><code class="lang-bash">  cd ~/
</code></pre>
</li>
</ul>
</li>
<li><p>Create the projects directory.  If you already have a directory that you store your projects in then you can skip this step.</p>
<pre><code class="lang-bash"> mkdir projects
</code></pre>
</li>
<li><p>Navigate into the projects directory</p>
<pre><code class="lang-bash"> cd projects
</code></pre>
</li>
<li><p>Generate a project named ngws that uses scss for styling and includes a routing file by running</p>
<pre><code class="lang-bash"> ng new ngws --style scss --routing
</code></pre>
</li>
<li><p>If you want to see the other ng new options, run</p>
<pre><code class="lang-bash"> ng new --help
</code></pre>
</li>
</ol>
<div class="exercise-end"></div>


<h3 id="opening-project-in-visual-studio-code">Opening Project in Visual Studio Code</h3>
<ol>
<li>Open Visual Studio Code</li>
<li>Click File -&gt; Open Folder...</li>
<li>Navigate to angular-tutorial directory and click Select Folder </li>
<li><p>Your project should now be opened in Visual Studio Code</p>
<p> <img src="images/project-layout.png" alt="Project Layout"></p>
</li>
</ol>
<h3 id="running-project">Running Project</h3>
<h4 class="exercise-start">
    <b>Exercise</b>: Run the project
</h4>

<p>The Angular CLI has a built-in command for starting up a web server for your project called <code>ng serve</code> which will run webpack to bundle up your code, start the web server, rebuild on file changes (watch) and refresh connected browsers (live reload).</p>
<ol>
<li>Visual Studio Code has a built-in terminal that we can use to run our commands.  On Windows, this is a powershell prompt.  To open the Integrated Terminal go under the View Menu and click on the Integrate Terminal or press Ctrl+`<ul>
<li>You are free to use the regular command prompt outside of Visual Studio Code if you would like</li>
</ul>
</li>
<li><p>Run</p>
<pre><code class="lang-bash"> ng serve
</code></pre>
<p> <img src="images/ng-serve.png" alt="ng serve output"></p>
</li>
</ol>
<ol>
<li><p>If you launch your browser and navigate to <a href="http://localhost:4200">http://localhost:4200</a>, you will see a page that looks like</p>
<p> <img src="images/appworks.png" alt="app works"></p>
</li>
</ol>
<div class="exercise-end"></div>


<h3 id="review">Review</h3>
<p>In this chapter we learned 3 things</p>
<ol>
<li>How to create a new projects using the <code>ng new</code> command</li>
<li>What the project layout looks like for an Angular project generated with the CLI</li>
<li>How to run our project with the <code>ng serve</code> command and view it at <a href="http://localhost:4200">http://localhost:4200</a></li>
</ol>

				</div>

				<hr>
				<div class="chapter">
					<h2 id="bootstrap">Bootstrap</h2>
<p>For our styling we are going to use <a href="https://v4-alpha.getbootstrap.com/">Bootstrap 4</a> which is still in alpha.  The reason for picking Bootstrap 4 and not Bootstrap 3 is so that you will be able to use the <a href="https://ng-bootstrap.github.io">Angular UI library</a> if you so choose.  We will not be using the Angular UI library in this workshop but it is a great library for component.  If you are a Bootstrap 3 developer, you can see all of the change in the <a href="https://v4-alpha.getbootstrap.com/migration/">Migration Guide</a>. </p>
<h3 id="install-bootstrap">Install Bootstrap</h3>
<h4 class="exercise-start">
    <b>Exercise</b>: Install Bootstrap
</h4>

<pre><code class="lang-bash"> npm install --save bootstrap@next font-awesome
</code></pre>
<div class="exercise-end"></div>

<h3 id="add-bootstrap-to-project">Add Bootstrap to Project</h3>
<h4 class="exercise-start">
    <b>Exercise</b>: Add  Bootstrap to Project
</h4>

<p>First we need to create our own custom Bootstrap style sheet so that we can override the scss variables if we want to with your own colors and styles.</p>
<ol>
<li>In the src\assets folder, create a new folder named bootstrap</li>
<li>In the bootstrap folder, create a file called _variables.scss</li>
<li><p>Add the following to the _variables.scss file</p>
<pre><code class="lang-scss"> // Variables
 // Colors
 //
 // Grayscale and brand colors for use across Bootstrap.
 $dark-blue: #003C71;

 // Start with assigning color names to specific hex values.
 $white:  #fff !default;
 $black:  #000 !default;
 $red:    #d9534f !default;
 $orange: #f0ad4e !default;
 $yellow: #ffd500 !default;
 $green:  #5cb85c !default;
 $blue:   #0275d8 !default;
 $teal:   #5bc0de !default;
 $pink:   #ff5b77 !default;
 $purple: #613d7c !default;

 // Create grayscale
 $gray-dark:                 #292b2c !default;
 $gray:                      #464a4c !default;
 $gray-light:                #636c72 !default;
 $gray-lighter:              #eceeef !default;
 $gray-lightest:             #f7f7f9 !default;

 // Reassign color vars to semantic color scheme
 $brand-primary:             $blue !default;
 $brand-success:             $green !default;
 $brand-info:                $teal !default;
 $brand-warning:             $orange !default;
 $brand-danger:              $red !default;
 $brand-inverse:             $gray-dark !default;
</code></pre>
</li>
<li><p>In the bootstrap folder, create a file called bootstrap.scss</p>
</li>
<li><p>Add the following contents to the bootstrap.scss file. Note that the list of included files outside of the variables file is the same as the ones in the  node_modules\bootstrap\scss\bootstrap.scss file with a ~bootstrap/scss prefix so that the scss compiler is able to find the included file in the node_modules\bootstrap\scss directory.</p>
<pre><code class="lang-scss"> @import &quot;variables&quot;;

 @import &quot;~bootstrap/scss/variables&quot;;
 @import &quot;~bootstrap/scss/mixins&quot;;
 @import &quot;~bootstrap/scss/custom&quot;;

 // Reset and dependencies
 @import &quot;~bootstrap/scss/normalize&quot;;
 @import &quot;~bootstrap/scss/print&quot;;

 // Core CSS
 @import &quot;~bootstrap/scss/reboot&quot;;   
 @import &quot;~bootstrap/scss/type&quot;;
 @import &quot;~bootstrap/scss/images&quot;;
 @import &quot;~bootstrap/scss/code&quot;;
 @import &quot;~bootstrap/scss/grid&quot;;
 @import &quot;~bootstrap/scss/tables&quot;;
 @import &quot;~bootstrap/scss/forms&quot;;
 @import &quot;~bootstrap/scss/buttons&quot;;

 // Components
 @import &quot;~bootstrap/scss/transitions&quot;;
 @import &quot;~bootstrap/scss/dropdown&quot;;
 @import &quot;~bootstrap/scss/button-group&quot;;
 @import &quot;~bootstrap/scss/input-group&quot;;
 @import &quot;~bootstrap/scss/custom-forms&quot;;
 @import &quot;~bootstrap/scss/nav&quot;;
 @import &quot;~bootstrap/scss/navbar&quot;;
 @import &quot;~bootstrap/scss/card&quot;;
 @import &quot;~bootstrap/scss/breadcrumb&quot;;
 @import &quot;~bootstrap/scss/pagination&quot;;
 @import &quot;~bootstrap/scss/badge&quot;;
 @import &quot;~bootstrap/scss/jumbotron&quot;;
 @import &quot;~bootstrap/scss/alert&quot;;
 @import &quot;~bootstrap/scss/progress&quot;;
 @import &quot;~bootstrap/scss/media&quot;;
 @import &quot;~bootstrap/scss/list-group&quot;;
 @import &quot;~bootstrap/scss/responsive-embed&quot;;
 @import &quot;~bootstrap/scss/close&quot;;

 // Components w/ JavaScript
 @import &quot;~bootstrap/scss/modal&quot;;
 @import &quot;~bootstrap/scss/tooltip&quot;;
 @import &quot;~bootstrap/scss/popover&quot;;
 @import &quot;~bootstrap/scss/carousel&quot;;

 // Utility classes
 @import &quot;~bootstrap/scss/utilities&quot;;

 /*
 * Font Awesome 4.x
 */
 $fa-font-path: &quot;~font-awesome/fonts&quot;;
 @import &quot;~font-awesome/scss/font-awesome&quot;;
</code></pre>
</li>
</ol>
<p>Now we need to configure the angular cli to import the bootstrap libraries.  </p>
<ol>
<li>Open the .angular-cli.json file which is the configuration file for our project for the Angular CLI </li>
<li><p>Find the apps\styles section and replace the section with:  </p>
<pre><code class="lang-TypeScript">   &quot;styles&quot;: [
     &quot;assets/bootstrap/bootstrap.scss&quot;,
      &quot;styles.scss&quot;
   ],
</code></pre>
</li>
</ol>
<div class="exercise-end"></div>

<h3 id="add-banner-section-to-top">Add Banner Section to Top</h3>
<h4 class="exercise-start">
    <b>Exercise</b>: Add Banner To Top of Page
</h4>

<ol>
<li><p>Open the src\app\app.compoment.html file and replace the contents with:</p>
<pre><code class="lang-html"> &lt;div class=&quot;jumbotron&quot;&gt;
     &lt;div class=&quot;container&quot;&gt;
         &lt;h1&gt;{{title}}&lt;/h1&gt;
     &lt;/div&gt;
 &lt;/div&gt;
 &lt;div class=&quot;container&quot;&gt;
     &lt;router-outlet&gt;&lt;/router-outlet&gt;
 &lt;/div&gt;
</code></pre>
</li>
<li><p>Lets change the title to something better than &quot;App Works!&quot;</p>
<ul>
<li>Open the src\app\app.component.ts file</li>
<li><p>On line 9, change the title variable to</p>
<pre><code class="lang-TypeScript">  title = &#39;Our Awesome Todo App!&#39;;
</code></pre>
</li>
</ul>
</li>
</ol>
<div class="exercise-end"></div>

<h3 id="view-changes">View Changes</h3>
<p>Normally, we would just be able to use the live reload feature of the ng serve command but since we changed the Angular CLI configuration file (.angulal-cli.json), we have to restart the ng serve command for the changes to take effect.  </p>
<h4 class="exercise-start">
    <b>Exercise</b>: Restart ng serve
</h4>

<ol>
<li>Go to the terminal that is running the <code>ng serve</code> command and do a ctrl+c to stop it.</li>
<li><p>Run the <code>ng serve</code> command again.</p>
<pre><code class="lang-bash"> ng serve
</code></pre>
</li>
<li><p>The web page should now look like</p>
<p> <img src="images/bootstrap-jumbotron.png" alt="App Works with Bootstrap"></p>
</li>
</ol>
<div class="exercise-end"></div>

<h3 id="review">Review</h3>
<p>In this chapter we learned how to use Bootstrap for our project.  </p>
<p>Learned:</p>
<ol>
<li>How to install Bootstrap 4 and font-awesome</li>
<li>How to integrate it into the Angular CLI in the .angular-cli.json file</li>
<li>How to create our own custom Bootstrap SCSS variables to override the built-in styles of Bootstrap with our own colors</li>
<li>How to create a banner at the top of the page</li>
<li>How to change the text that appears in the banner using our TypeScript title variable</li>
<li>Learned that when you modify the .angular-cli.json file that you have to restart <code>ng serve</code> for the changes to take effect</li>
</ol>

				</div>
				<hr>
				<div class="chapter">
					<h2 id="header-and-footer">Header and footer</h2>
<p>In most web sites we have a header and footer at the top and bottom of the page respectively with our logo, navigation, and important links.  The header will contain our logo and navigation menu while the footer will contain our copyright info. </p>
<h3 id="create-header-component">Create Header Component</h3>
<h4 class="exercise-start">
    <b>Exercise</b>: Creating the header component
</h4>

<p>We can leave ng serve running while we make these changes and open up another Integrate Terminal for the commands below.</p>
<ol>
<li>In the VS Code Integrated Terminal, click the + to open a 2nd terminal</li>
<li><p>Run the ng generate command to create the header component</p>
<pre><code class="lang-bash"> ng generate component shared/header
</code></pre>
</li>
<li><p>The generate command will create 4 files: </p>
<p> <img src="images/header-generate.png" alt="output of generate"></p>
<ul>
<li>scss (styles)</li>
<li>html (view)</li>
<li>spec file (test)</li>
<li>component (controller)</li>
<li>add reference to the component in the app.module.ts file.</li>
</ul>
</li>
</ol>
<div class="exercise-end"></div>

<h4 class="exercise-start">
    <b>Exercise</b>: Add the Menu 
</h4>

<div class="alert alert-warning" role="alert">This is a sample menu that includes a few links and a sub-menu dropdown.  Note that none of the links will work since we have not created any of those other pages or routes.</div>

<ol>
<li><p>Open the src\app\shared\header.component.html file and replace the contents with the following. </p>
<pre><code class="lang-html"> &lt;header&gt;
     &lt;nav class=&quot;navbar navbar-toggleable-md navbar-light bg-faded&quot;&gt;
         &lt;button class=&quot;navbar-toggler navbar-toggler-right&quot; type=&quot;button&quot; data-toggle=&quot;collapse&quot; data-target=&quot;#navbarSupportedContent&quot;
         aria-controls=&quot;navbarSupportedContent&quot; aria-expanded=&quot;false&quot; aria-label=&quot;Toggle navigation&quot;&gt;
         &lt;span class=&quot;navbar-toggler-icon&quot;&gt;&lt;/span&gt;
     &lt;/button&gt;
         &lt;a class=&quot;navbar-brand&quot; [routerLink]=&quot;[&#39;/&#39;]&quot;&gt;&lt;img class=&quot;navbar-logo&quot; src=&quot;./assets/todo_logo.png&quot; alt=&quot;Logo&quot;&gt;&lt;/a&gt;
         &lt;div class=&quot;collapse navbar-collapse&quot; id=&quot;navbarSupportedContent&quot;&gt;
         &lt;ul class=&quot;nav navbar-nav mr-auto&quot;&gt;
             &lt;li class=&quot;nav-item active&quot;&gt;
             &lt;a class=&quot;nav-link&quot; [routerLink]=&quot;[&#39;/&#39;]&quot;&gt;All Items&lt;/a&gt;
             &lt;/li&gt;
         &lt;/ul&gt;
         &lt;/div&gt;
     &lt;/nav&gt;
 &lt;/header&gt;
</code></pre>
</li>
<li><p>Right-click on the logo below and save it to the src/assets folder of our project</p>
<p> <img src="images/todo_logo.png" alt="Logo"></p>
</li>
</ol>
<div class="exercise-end"></div>

<h3 id="display-header">Display Header</h3>
<h4 class="exercise-start">
    <b>Exercise</b>: Update Main page
</h4>

<p>Now that we have created the menu, we need to add it to our rendered view.  </p>
<ol>
<li>Open the src\app\app.component.ts file </li>
<li><p>Import the header component.  Add the import statement on line 2 right below the existing import statement.</p>
<pre><code class="lang-TypeScript"> import { HeaderComponent } from &#39;./shared/header/header.component&#39;;
</code></pre>
</li>
<li><p>Open the src\app\app.component.html file and replace the contents of this file with the following html.  </p>
<pre><code class="lang-html"> &lt;app-header&gt;&lt;/app-header&gt;
 &lt;div class=&quot;jumbotron&quot;&gt;
     &lt;div class=&quot;container&quot;&gt;
         &lt;h1&gt;{{title}}&lt;/h1&gt;
     &lt;/div&gt;
 &lt;/div&gt;
 &lt;div class=&quot;container clearfix&quot;&gt;
     &lt;router-outlet&gt;&lt;/router-outlet&gt;
 &lt;/div&gt;
</code></pre>
 <div class="alert alert-info" role="alert"><strong>Note:</strong> that the router-outlet tag is how Angular knows where to put the content of each of the views.</div>
</li>
<li><p>If you view the web page you should see the header with logo, &quot;All Items&quot; menu and our banner.</p>
<p><img src="images/header-view.png" alt="App Component with Header View"></p>
</li>
</ol>
<div class="exercise-end"></div>

<h3 id="create-footer">Create Footer</h3>
<p>Creating the footer is very similar to creating the header.  The biggest difference is that we have some css styling that we will apply to position the footer at the bottom of the page.  </p>
<p>The really awesome part of the css we are going to apply is that Angular has the concept of CSS encapsulation so the styling will only apply to the footer component and not to the rest of the site.  This gets automatically implemented for us, just by putting the styling in the footer components scss file instead of using th global style.scss file.</p>
<h4 class="exercise-start">
    <b>Exercise</b>: Creating the footer component
</h4>


<ol>
<li><p>In the Integrated Terminal, run the ng generate command to create the header component</p>
<pre><code class="lang-bash"> ng generate component shared/footer
</code></pre>
</li>
<li><p>The generate command will create 4 files: </p>
<p> <img src="images/footer-generate.png" alt="Generate Output"></p>
<ul>
<li>scss (styles)</li>
<li>html (view)</li>
<li>spec file (test)</li>
<li>component (controller)</li>
<li>add reference to the component in the app.module.ts file.</li>
</ul>
</li>
<li><p>Open the src\app\shared\footer\footer.component.html and replace the contents with</p>
<pre><code> &lt;footer&gt;
     &lt;div class=&quot;pull-center&quot;&gt;
         &amp;copy;Angular WS
     &lt;/div&gt;
 &lt;/footer&gt;
</code></pre></li>
</ol>
<div class="exercise-end"></div>    

<h4 class="exercise-start">
    <b>Exercise</b>: Styling the Footer
</h4>

<p>We want to postion the footer at bottom of the page and change the background color.  With Angular 2, we now have the ablity to have css constrained to an individual component like the footer instead of being global for the whole site to use.  We still have the ability to have global css for those styles that should be applied to the whole site by using the src\styles.scss file.  </p>
<p>Since the footer is in the src\app\shared\footer\footer.component.html file we need to add the footer styles to the src\app\footer\footer.component.scss file and add the following content</p>
<pre><code class="lang-scss">@import &quot;../../../assets/bootstrap/variables.scss&quot;;

footer {
    position: fixed;
    height: 50px;
    bottom: 0;
    left: 0;
    right: 0;
    padding: 10px 5px;
    border-top: 1px solid $gray-light;
    background-color: $gray-lighter;
    font-size: 0.8em;
    color: $dark-blue;
    div {
        margin-left: 25px;
        margin-right: 25px;
    }
}
</code></pre>
<div class="exercise-end"></div>

<h3 id="display-footer">Display Footer</h3>
<h4 class="exercise-start">
    <b>Exercise</b>: Update Main page
</h4>

<p>Now we are ready to add our footer to the Main page</p>
<ol>
<li><p>Open the src\app\app.component.ts file and import the footer component below the HeaderComponent import statement (note: order is not important)</p>
<pre><code class="lang-TypeScript">import { FooterComponent } from &#39;./shared/footer/footer.component&#39;;
</code></pre>
</li>
<li><p>Open the src\app\app.component.html file and replace the contents of this file with the following html</p>
<pre><code class="lang-html"> &lt;app-header&gt;&lt;/app-header&gt;
 &lt;div class=&quot;jumbotron&quot;&gt;
     &lt;div class=&quot;container&quot;&gt;
         &lt;h1&gt;{{title}}&lt;/h1&gt;
     &lt;/div&gt;
 &lt;/div&gt;
 &lt;div class=&quot;container clearfix&quot;&gt;
     &lt;router-outlet&gt;&lt;/router-outlet&gt;
 &lt;/div&gt;
 &lt;app-footer&gt;&lt;/app-footer&gt;
</code></pre>
</li>
<li><p>If you view the web page you should see the footer </p>
<p><img src="images/footer-view.png" alt="App Works with Footer"></p>
</li>
</ol>
<div class="exercise-end"></div>


<h4 class="exercise-start">
    <b>Exercise</b>: Fixing body height
</h4>

<p>Since we have a static footer, will need to change the body height to account for the footer height.  Without doing this the body content will be hidden for the last 50px of the screen.</p>
<p>So far we have seen how to use component level css but Angular still has the ability to do global styles that will apply to the whole by adding them into the src\style.scss file.</p>
<ol>
<li><p>Open the src\style.scss file and add the following css </p>
<pre><code class="lang-html"> html {
     position: relative;
     height: auto;
     min-height: 100%;
 }

 body {
     position: static;
     height: auto;
     margin: 0 0 60px; /* bottom = footer height */
 }
</code></pre>
</li>
</ol>
<div class="exercise-end"></div>

<h3 id="review">Review</h3>
<p>In this chapter will learned:</p>
<ol>
<li>How to create new components</li>
<li>How to import and use components within other components</li>
<li>Learned about component level styles so that they only apply to a single component</li>
<li>Learned how to do global styles that apply to the whole site</li>
<li>Learned that if we have a static footer that we need to adjust the body margin height to stop content for being hidden behind the footer.</li>
<li>Learned that the <code>&lt;router-outlet&gt;&lt;/router-outlet&gt;</code> tag is used to tell Angular the location within the html code to render the routed component&#39;s template (html)</li>
</ol>

				</div>
				<hr>

				<div class="chapter">
					<h2 id="template-based-forms">Template Based Forms</h2>
<p>There are 2 options for creating forms within Angular: Template based and Model based.  This chapter will cover template based forms.</p>
<p>Template based forms are simple and easy to use.  They are great for simple use cases.  However, there are some limitations with template  based forms: 1.) You end up with a lot of logic in your html code 2.) Cross field validation is more difficult 3.) You can not unit test your form and validation logic.</p>
<p>To demonstrate template based forms, we are going to be build a login component.</p>
<h3 id="create-login-component">Create Login Component</h3>
<p>The first thing we need to do is to create our login component using the Angular CLI.  We will use the <code>ng generate component</code> command to do this.  </p>
<h4 class="exercise-start">
    <b>Exercise</b>: Create Login  Component 
</h4>

<ol>
<li>Within VS Code, open up the integrated terminal (ctrl+`) or view menu and then &quot;Integrated Terminal&quot;</li>
<li><p>Run the ng generate command below to create the login component</p>
<pre><code class="lang-bash"> ng generate component login
</code></pre>
</li>
<li><p>The generate command will create 4 files: </p>
<p> <img src="images/login-generate.png" alt="output of generate"></p>
<ul>
<li>scss (styles)</li>
<li>html (view)</li>
<li>spec file (test)</li>
<li>component (controller)</li>
<li>add reference to the component in the app.module.ts file.</li>
</ul>
</li>
</ol>
<div class="exercise-end"></div>

<h3 id="add-route">Add Route</h3>
<p>In order to view our Login component we need to tell Angular how to route to it.  We are going to add a route at &#39;/login&#39; to the LoginComponent.</p>
<h4 class="exercise-start">
    <b>Exercise</b>: Login Routing 
</h4>

<p>Before we can view our Login component, we need to tell Angular how to route to the component</p>
<ol>
<li>Open the src\app\app-routing.module.ts file</li>
<li><p>Add the Import statement for the login component on line 3</p>
<pre><code class="lang-TypeScript"> import { LoginComponent } from &#39;./login/login.component&#39;;
</code></pre>
</li>
<li><p>Add the LoginComponent route to the list of routes+</p>
<pre><code class="lang-TypeScript"> { path: &#39;login&#39;, children: [], component: LoginComponent }
</code></pre>
 <div class="alert alert-info" role="alert"><strong>Note:</strong> This will cause the LoginComponent to load into the <code>&lt;router-outlet&gt;&lt;/router-outlet&gt;</code> in the src\app\app.component.html when navigate to <a href="http://localhost:4200/login">http://localhost:4200/login</a> .  The router-outlet tag is how Angular knows where to put the rendered content of the routed componente.</div>


</li>
</ol>
<ol>
<li><p>The Login page should be able to be displayed if you navigate to <a href="http://localhost:4200/login">http://localhost:4200/login</a></p>
<p> <img src="images/login-initial-view.png" alt="login initial view"></p>
</li>
</ol>
<div class="exercise-end"></div>


<h3 id="create-form">Create Form</h3>
<p>Next we are going to create the form without any validation logic at all.  Our form will have 2 input fields:  email and password and 2 buttons: submit and cancel.  </p>
<h4 class="exercise-start">
    <b>Exercise</b>:  Creating the Form
</h4>

<ol>
<li>Open src\app\login\login.component.html</li>
<li><p>Replace the existing html with the following</p>
<pre><code class="lang-html"> &lt;h1&gt;Login&lt;/h1&gt;
 &lt;hr&gt;
 &lt;div&gt;
     &lt;form autocomplete=&quot;off&quot; novalidate&gt;
         &lt;div class=&quot;form-group&quot;&gt;
             &lt;label for=&quot;email&quot;&gt;Email:&lt;/label&gt;
             &lt;input name=&quot;email&quot; id=&quot;email&quot; type=&quot;text&quot; class=&quot;form-control&quot; placeholder=&quot;Email...&quot; /&gt;
         &lt;/div&gt;
         &lt;div class=&quot;form-group&quot;&gt;
             &lt;label for=&quot;password&quot;&gt;Password:&lt;/label&gt;
             &lt;input name=&quot;password&quot; id=&quot;password&quot; id=&quot;password&quot; type=&quot;password&quot; class=&quot;form-control&quot; placeholder=&quot;Password...&quot; /&gt;
         &lt;/div&gt;
         &lt;button type=&quot;submit&quot; class=&quot;btn btn-primary&quot;&gt;Login&lt;/button&gt;
         &lt;button type=&quot;button&quot; class=&quot;btn btn-default&quot;&gt;Cancel&lt;/button&gt;
     &lt;/form&gt;
 &lt;/div&gt;
</code></pre>
<ul>
<li>This form is using Bootstrap for the styling with the form-group and form-control css classes.</li>
<li>The autocomplete=&quot;off&quot; and novalidate directives for the form tag tell the browser to turn off that built-in functionality so that we can do our validation with Angular.</li>
</ul>
</li>
</ol>
<div class="exercise-end"></div>

<h3 id="add-submit-method">Add Submit Method</h3>
<p>In order to submit the form we need to tell Angular that that login form is an ngForm and use the ngSubmit event to tell Angular what to do when the form submit button is clicked.</p>
<h4 class="exercise-start">
    <b>Exercise</b>:  Add login function
</h4>

<ol>
<li><p>In the login.component.html file on the <code>&lt;form&gt;</code> tag add the following attributes.  </p>
<pre><code class="lang-html"> #loginForm=&quot;ngForm&quot; (ngSubmit)=&quot;login(loginForm.value)&quot;
</code></pre>
</li>
<li><p>On the email field we need to add an attribute tell Angular to implement a 1 way binding of the field.  We use the <code>(ngModel)</code> attribute to tell Angular what field in the form values we want to the data to be bound to.</p>
<pre><code class="lang-html"> (ngModel)=&quot;email&quot;
</code></pre>
</li>
<li><p>On the password field we are going to do the same thing that we just did to the email field.  </p>
<pre><code class="lang-html"> (ngModel)=&quot;password&quot;
</code></pre>
</li>
</ol>
<p>Next we need to implement the login function in the component.</p>
<ol>
<li>Open the login.component.ts file</li>
<li><p>Inside of the LoginComponent class, add the login function below.  For now we are just going to output the form values to the console. </p>
<pre><code class="lang-TypeScript"> login(formValues) {
     console.log(formValues);
 }
</code></pre>
</li>
<li><p>In your browser, while viewing the login form at <a href="http://localhost:4200/login">http://localhost:4200/login</a> open the developer tools and click the console tab so that you can see the console output.    </p>
</li>
<li><p>Now enter a value into the email and password fields and click the submit button.  You will see output similar to the below image where I entered the email of email@gmail.com and password of 123456</p>
<p> <img src="images/login-submit-console.png" alt="login console output"></p>
</li>
</ol>
<p>At this point we are ready to wire up the login form to actually </p>
<div class="exercise-end"></div>


<h3 id="required-validation">Required Validation</h3>
<h4 class="exercise-start">
    <b>Exercise</b>: Add Required Validation
</h4>


<p>For both the email and password fields they are required.  While we could check them in the component TypeScript code, Angular has built in validation by adding the <code>required</code> attribute to each of the inputs.</p>
<ol>
<li>Open the login.component.html</li>
<li><p>Add the <code>required</code> attribute to the email input field like so</p>
<pre><code class="lang-html"> &lt;input required (ngModel)=&quot;email&quot; name=&quot;email&quot; id=&quot;email&quot;  type=&quot;text&quot; class=&quot;form-control&quot; placeholder=&quot;Email...&quot; /&gt;
</code></pre>
</li>
<li><p>Add the <code>required</code> attribute to the password input field</p>
<pre><code class="lang-html"> &lt;input required (ngModel)=&quot;password&quot; name=&quot;password&quot; id=&quot;password&quot; id=&quot;password&quot; type=&quot;password&quot; class=&quot;form-control&quot; placeholder=&quot;Password...&quot; /&gt;
</code></pre>
</li>
</ol>
<p>Next we want to display a message to the user when they have invalid entries in the form fields</p>
<ol>
<li><p>For the email field, inside of the form-group div tag and after the input field add the following code.  This code will show when the required errors triggers.  To trigger the error message, click on the email field and then click on the password field.</p>
<pre><code class="lang-TypeScript"> &lt;div *ngIf=&quot;email.errors &amp;&amp; (email.dirty || email.touched)&quot; class=&quot;alert alert-danger&quot;&gt;
     &lt;div [hidden]=&quot;!email.errors.required&quot;&gt;
     Email is required
     &lt;/div&gt;
 &lt;/div&gt;
</code></pre>
</li>
<li><p>In order to refer to the email field by name when checking errors, we need to add the <code>#email=&quot;ngModel&quot;</code> attribute to the email input field to tell Angular to create a variable for the control and make the value the ngModel value for the email field.  </p>
<pre><code class="lang-html"> &lt;input #email=&quot;ngModel&quot; required (ngModel)=&quot;email&quot; name=&quot;email&quot; id=&quot;email&quot; type=&quot;text&quot; class=&quot;form-control&quot; placeholder=&quot;Email...&quot; /&gt;
</code></pre>
</li>
<li><p>For the password field, inside of the form-group div tag and after the input field add the following code.  This code will show when the required errors triggers.  To trigger the error message, click on the password field and then click on the email field.</p>
<pre><code class="lang-TypeScript"> &lt;div *ngIf=&quot;password.errors &amp;&amp; (password.dirty || password.touched)&quot; class=&quot;alert alert-danger&quot;&gt;
     &lt;div [hidden]=&quot;!password.errors.required&quot;&gt;
     Password is required
     &lt;/div&gt;
 &lt;/div&gt;
</code></pre>
</li>
<li><p>Just like the email field, we need to add the <code>#password=&quot;ngModel&quot;</code> attribute to the input control to name the field</p>
<pre><code class="lang-html"> &lt;input #password=&quot;ngModel&quot; required (ngModel)=&quot;password&quot; name=&quot;password&quot; id=&quot;password&quot; id=&quot;password&quot; type=&quot;password&quot; class=&quot;form-control&quot; placeholder=&quot;Password...&quot; /&gt;
</code></pre>
</li>
</ol>
<p>The last thing we want to do is to disable the login button until the form is valid.</p>
<ol>
<li><p>Find the submit button and add the following attribute to it to disable the button when the login form is invalid</p>
<pre><code class="lang-html"> &lt;button type=&quot;submit&quot;  [disabled]=&quot;loginForm.invalid&quot; class=&quot;btn btn-primary&quot;&gt;Login&lt;/button&gt;
</code></pre>
</li>
<li><p>Now we are ready to test our required validation.  </p>
<ul>
<li>Trigger email by clicking on the field and then clicking off the field with it still being blank or type something in the field and then erase it</li>
<li><p>Trigger the password field the same way</p>
<p><img src="images/login-required-validation.png" alt="required validation"></p>
</li>
</ul>
</li>
</ol>
<div class="exercise-end"></div>

<h3 id="email-validation">Email  Validation</h3>
<h4 class="exercise-start">
    <b>Exercise</b>: Add Email Validation
</h4>

<p>With the Angular 4 release, they added an email validator.  To add the validator to our email field, we just need to add an <code>email</code> attribute like we did for the <code>required</code> attribute.</p>
<pre><code class="lang-html">&lt;input email #email=&quot;ngModel&quot; required (ngModel)=&quot;email&quot; name=&quot;email&quot; id=&quot;email&quot; type=&quot;text&quot; class=&quot;form-control&quot; placeholder=&quot;Email...&quot; /&gt;
</code></pre>
<p>Next we need to add a message like we did for the required validator for when the email validation triggers on an invalid email.  Add the following code below the required message but within the <code>&lt;div&gt;</code> that checks if there are errors.</p>
<pre><code class="lang-html">&lt;div [hidden]=&quot;!email.errors.email&quot;&gt;
    Must be an email address
&lt;/div&gt;
</code></pre>
<p>Now we are ready to test the email validation.  </p>
<ul>
<li><p>The validation will trigger if you input text into the email field that is not a valid email address.</p>
<p>  <img src="images/login-email-validation.png" alt="email validation"></p>
</li>
<li><p>The validation will also trigger at the same time as required </p>
<p>  <img src="images/login-email-required-validation.png" alt="required validation"></p>
</li>
</ul>
<p>Test</p>
<div class="exercise-end"></div>

<h3 id="disable-login-button">Disable Login Button</h3>
<h4 class="exercise-start">
    <b>Exercise</b>: Disable Login Button Until Valid
</h4>

<p>The last thing we want to do is to disable the login button until the form is valid.</p>
<ol>
<li><p>Find the submit button and add the following attribute to it to disable the button when the login form is invalid</p>
<pre><code class="lang-html"> &lt;button type=&quot;submit&quot;  [disabled]=&quot;loginForm.invalid&quot; class=&quot;btn btn-primary&quot;&gt;Login&lt;/button&gt;
</code></pre>
</li>
<li><p>Now when either field is invalid the login button will be disabled and a lighter share of blue</p>
<p> <img src="images/login-submit-disabled.png" alt="required validation"></p>
</li>
</ol>
<div class="exercise-end"></div>

<h3 id="implement-login-service">Implement Login Service</h3>
<p>Now that we have our form done, we are going to implement our login service.</p>
<h4 class="exercise-start">
    <b>Exercise</b>:  Generate Service
</h4>

<ol>
<li>Within VS Code, open up the integrated terminal (ctrl+`) or view menu and then &quot;Integrated Terminal&quot;</li>
<li><p>Run the ng generate command below to create the Authorization service.  I like to store my services under a shared\services folder.</p>
<pre><code class="lang-bash"> ng generate service shared/service/auth
</code></pre>
</li>
<li><p>The generate command will create 2 files: </p>
<p> <img src="images/login-service-generate.png" alt="output of generate"></p>
<ul>
<li>spec file (test)</li>
<li>typescript (service)</li>
</ul>
</li>
</ol>
<p>You will also notice that thre is a warning that the service has not been provided. This means that we need to open up the module that we want to use the service in and add it to the providers list.</p>
<ol>
<li>Open src\app.module.ts</li>
<li><p>Import the AuthService</p>
<pre><code class="lang-TypeScript"> import { AuthService } from &#39;./shared/services/auth.service&#39;;
</code></pre>
</li>
<li><p>Find the @NgModule providers list and add the AuthService</p>
<pre><code class="lang-TypeScript">   providers: [AuthService],
</code></pre>
</li>
<li><p>Now the AuthService is available to the AppModule and we can use it in our LoginComponent</p>
</li>
</ol>
<div class="exercise-end"></div>

<h4 class="exercise-start">
    <b>Exercise</b>:  Starting JSON-Server
</h4>

<p>We are going to use the JSON server that we installed early to create a mock api for our UI so that we can focused on Angular and not worry about creating a real API.  The calls that we will be making to the API are the same calls in Angular that we would make to a real API.</p>
<ol>
<li>Right-click on the <a href="files/db.json">db.json</a> and save the db.json file to under your Angular project directory</li>
<li>Within VS Code, open up the integrated terminal (ctrl+`) or view menu and then &quot;Integrated Terminal&quot;</li>
<li>Click the + sign to create a new terminal tab</li>
<li><p>Run the following command to start up our json-server from the root directory of the Angular project </p>
<pre><code class="lang-bash"> json-server db.json
</code></pre>
</li>
<li><p>If everything worked correctly you should see the following output</p>
<p> <img src="images/json-server-start.png" alt="json-server start output"></p>
</li>
</ol>
<ol>
<li>You can now make REST calls to <a href="http://localhost:3000/user">http://localhost:3000/user</a> and <a href="http://localhost:3000/todo">http://localhost:3000/todo</a></li>
</ol>
<div class="alert alert-danger" role="alert">
In a real API, you would want to implement SSL to encrypt all of the traffic and protect the passwords by encrypting them in the data store.
</div>

<div class="exercise-end"></div>

<h4 class="exercise-start">
    <b>Exercise</b>: Implement Auth Service Login Function
</h4>

<p>Now that we have our API server up and running, it is time to create our Auth service login function that call the API.</p>
<ol>
<li>Open the src\shared\services\auth.service.ts file</li>
<li><p>Import the following so that we can make our HTTP calls and get a response back.  </p>
<pre><code class="lang-TypeScript"> import { Http, Response } from &#39;@angular/http&#39;;
 import { Observable } from &#39;rxjs/Rx&#39;;
</code></pre>
</li>
<li><p>In order to use the HTTP module, we need to inject it into our constructor</p>
<pre><code class="lang-TypeScript"> constructor(private http: Http) {
 }
</code></pre>
</li>
<li><p>We also want to create a public variable within the AuthClass to hold the output from the API call </p>
<pre><code class="lang-TypeScript"> public currentUser: any;
</code></pre>
</li>
<li><p>Next we need to create our login function within the AuthService class that will call our API</p>
<pre><code class="lang-TypeScript"> login(email: string, password: string): Observable&lt;boolean | Response&gt; {
     let url = `http://localhost:3000/user?email=${email}&amp;password=${password}`;
     return this.http.get(url)
         .do((res: Response) =&gt; {
             let body = res.json();
             if (body &amp;&amp; body.length === 1) {
                 this.currentUser = body[0];
             } else {
                 this.currentUser = null;
             }
         })
         .catch(error =&gt; {
             console.log(&#39;login error&#39;, error)
             return Observable.of(false);
         });
 }
</code></pre>
</li>
</ol>
<div class="exercise-end"></div>


<h4 class="exercise-start">
    <b>Exercise</b>: Call AuthService from LoginComponent
</h4>

<p>Now that we have our AuthService completed, we need to call it from our LoginComponent.  If we get a user back we will redirect the user to the home page</p>
<ol>
<li>Open the src\login\login.component.ts file</li>
<li><p>Import the AuthService so that we can make our HTTP calls and get a response back.  </p>
<pre><code class="lang-TypeScript"> import { AuthService } from &#39;../shared/services/auth.service&#39;;
 import { Router } from &#39;@angular/router&#39;;
</code></pre>
</li>
<li><p>In order to use the AuthService and Router, we need to inject it into our constructor</p>
<pre><code class="lang-TypeScript">constructor(private authService: AuthService, private router: Router) { }
</code></pre>
</li>
<li><p>Next we need to update our login function to call the AuthService and redirect if it finds the user.</p>
<pre><code class="lang-TypeScript">   login(formValues) {
 this.authService.login(formValues.email, formValues.password)
   .subscribe(result =&gt; {
     if (!this.authService.currentUser) {
       console.log(&#39;user not found&#39;);
     } else {
       this.router.navigate([&#39;/&#39;]);
     }
   });
 }
</code></pre>
</li>
<li><p>Navigate to <a href="http://localhost:4200/login">http://localhost:4200/login</a> .</p>
<ul>
<li>If you enter an email of foo@foo.com with a password 123456 you should be redirected to the home page</li>
<li>If you enter a bogus email or password, you will see a &quot;user not found&quot; message in the browser developer tools console.</li>
</ul>
</li>
</ol>
<div class="exercise-end"></div>

				</div>
				<hr>

				<div class="chapter">
					<h2 id="reactive-forms">Reactive Forms</h2>
<p>In the previous chapter, we took a look at template based forms.  In this chapter will will take a look at reactive based forms.</p>
<p>Reactive forms allow you to define the form fields and validation in the component instead of the template.  You can easily test the form fields and validation logic.  You can also dynamically build the form and validation in the component.</p>
<p>We are going to build the form to enter our Todo items using Reactive forms.</p>
<h3 id="create-component">Create Component</h3>
<h4 class="exercise-start">
    <b>Exercise</b>: Create Todo Component 
</h4>

<ol>
<li>Within VS Code, open up the integrated terminal (ctrl+`) or view menu and then &quot;Integrated Terminal&quot;</li>
<li><p>Run the ng generate command below to create the todo component</p>
<pre><code class="lang-bash"> ng generate component todo
</code></pre>
</li>
<li><p>The generate command will create 4 files: </p>
<p> <img src="images/todo-generate.png" alt="output of generate"></p>
<ul>
<li>scss (styles)</li>
<li>html (view)</li>
<li>spec file (test)</li>
<li>component (controller)</li>
<li>add reference to the component in the app.module.ts file.</li>
</ul>
</li>
</ol>
<div class="exercise-end"></div>

<h3 id="add-route">Add Route</h3>
<h4 class="exercise-start">
    <b>Exercise</b>: Todo Routing 
</h4>

<p>Before we can view our todo component, we need to tell Angular how to route to the page</p>
<ol>
<li>Open the src\app\app-routing.module.ts file</li>
<li><p>Add the Import statement for the todo component on line 3</p>
<pre><code class="lang-TypeScript"> import { TodoComponent } from &#39;./todo/todo.component&#39;;
</code></pre>
</li>
<li><p>Add the TodoComponent to the home page route as specified by the <code>path: &#39;&#39;</code> </p>
<pre><code class="lang-TypeScript"> {
     path: &#39;&#39;,
     children: [],
     component: TodoComponent
 }
</code></pre>
 <div class="alert alert-info" role="alert"><strong>Note:</strong> This will cause the TodoComponent to load into the <code>&lt;router-outlet&gt;&lt;/router-outlet&gt;</code> in the src\app\app.component.html.  The router-outlet tag is how Angular knows where to put the rendered content of the routed componente.</div>


</li>
</ol>
<ol>
<li><p>The todo page should be able to be displayed if you navigate to <a href="http://http://localhost:4200/">http://http://localhost:4200/</a></p>
<p> <img src="images/todo-initial-view.png" alt="todo initial view"></p>
</li>
</ol>
<div class="exercise-end"></div>


<h3 id="create-form">Create Form</h3>
<h4 class="exercise-start">
    <b>Exercise</b>: Importing the ReactiveFormsModule
</h4>

<p>Our component is going to use the ReactiveFormsModule which means that we need to tell Angular to include this module in the imports statement it in the app module.  </p>
<ol>
<li>Open the src\app\app.module.ts </li>
<li><p>Add ReactiveFormsModule to the @angular/forms import so that it looks like </p>
<pre><code class="lang-TypeScript"> import { FormsModule, ReactiveFormsModule } from &#39;@angular/forms&#39;;
</code></pre>
</li>
<li><p>In the @NgModule imports you need to add ReactiveFormsModule to the list</p>
<pre><code class="lang-TypeScript"> imports: [
     BrowserModule,
     FormsModule,
     ReactiveFormsModule,
     HttpModule,
     AppRoutingModule
 ],
</code></pre>
</li>
</ol>
<div class="exercise-end"></div>

<h4 class="exercise-start">
    <b>Exercise</b>: Updating the Todo Component TypeScript File
</h4>

<p>Now we are ready to add all of the functionality to the component for the UI to interface with.  The controllers in Angular 2 are called components and are TypeScript files.  For the todo component it is the src\app\todo\todo.component.ts file.  We need to add the Form and Todo import statements, add several variables into the component&#39;s class and tell Angular about the addForm group.</p>
<ol>
<li>Open the todo\todo.component.ts file</li>
<li><p>We need to import a few items  </p>
<pre><code class="lang-TypeScript"> import { FormGroup, FormBuilder, Validators } from &#39;@angular/forms&#39;;
 import { Todo } from &#39;../shared/classes/todo&#39;;
</code></pre>
</li>
<li><p>We need to create serveral variables within the TodoComponent  class</p>
<pre><code class="lang-TypeScript"> todoList: Array&lt;Todo&gt; = [];
 addForm: FormGroup;
 todo: Todo = new Todo();
 submitting: boolean = false;
 errorMessage: string;
 openItemCount: number = 0;
</code></pre>
<ul>
<li>todoList -&gt; holds our todo list.  Is an Array of Todo.</li>
<li>addForm -&gt; holds our configuration for the add form</li>
<li>todo -&gt; class to hold the values from our add form</li>
<li>submitting -&gt; used in the UI to toggle on and off features and change text of the add button</li>
<li>errorMessage -&gt; holds any error messages from the service calls and used to toggle div in UI </li>
<li>openItemCount -&gt; holds the number of items that need to be completed</li>
</ul>
</li>
<li><p>In the TodoComponent constructor we need to inject FormBuilder and TodoService plus configure the addForm.</p>
<pre><code class="lang-TypeScript"> constructor(private formBuilder: FormBuilder) {
     this.addForm = formBuilder.group({
         &#39;name&#39;: [&#39;&#39;, [Validators.required]]
     });
 }
</code></pre>
</li>
</ol>
<div class="exercise-end"></div>

<h4 class="exercise-start">
    <b>Exercise</b>:  Creating the todo UI 
</h4>

<p>We are now ready to create our UI. </p>
<ol>
<li><p>Open the src\app\todo\todo.component.html file that was generated for you and replace the contents with:</p>
<pre><code class="lang-html"> &lt;div class=&quot;container todo-wrapper&quot;&gt;
     &lt;div class=&quot;page-header&quot;&gt;
         &lt;h1 align=&quot;center&quot;&gt;Todo List&lt;/h1&gt;
         &lt;p class=&quot;text-center lead&quot;&gt;You&#39;ve got &lt;em&gt;{{ openItemCount }}&lt;/em&gt; things to do&lt;/p&gt;
     &lt;/div&gt;
     &lt;form role=&quot;form&quot; [formGroup]=&quot;addForm&quot; (ngSubmit)=&quot;createTodo()&quot; class=&quot;text-center&quot;&gt;
         &lt;div class=&quot;form-group&quot;&gt;
         &lt;input type=&quot;text&quot; class=&quot;form-control input-lg&quot; formControlName=&quot;name&quot; id=&quot;name&quot; placeholder=&quot;Add Todo!&quot; [(ngModel)]=&quot;todo.name&quot;&gt;&lt;button
             type=&quot;submit&quot; class=&quot;btn btn-primary btn-lg&quot; [disabled]=&quot;!addForm.valid || submitting&quot;&gt;&lt;span *ngIf=&quot;!submitting&quot;&gt;Add&lt;/span&gt;&lt;span *ngIf=&quot;submitting&quot;&gt;Adding...&lt;/span&gt;&lt;/button&gt;
         &lt;/div&gt;
         &lt;div class=&quot;row errors&quot;&gt;
         &lt;div class=&quot;col-md-12&quot;&gt;
             &lt;div *ngIf=&quot;addForm.controls.name.errors &amp;&amp; addForm.controls.name.dirty&quot; class=&quot;alert alert-danger&quot;&gt;
             &lt;div [hidden]=&quot;!addForm.controls.name.errors.required&quot;&gt;
                 Title is required
             &lt;/div&gt;
             &lt;/div&gt;
             &lt;div *ngIf=&quot;errorMessage&quot; class=&quot;alert alert-danger&quot; role=&quot;alert&quot;&gt;
             There was an error submitting your todo. Please try again.
             &lt;/div&gt;
         &lt;/div&gt;
         &lt;/div&gt;
     &lt;/form&gt;
     &lt;div class=&quot;row&quot;&gt;
         &lt;div class=&quot;col-md-12&quot;&gt;
         &lt;div class=&quot;todo&quot; *ngFor=&quot;let todoItem of todoList&quot;&gt;
             &lt;span class=&quot;pull-left&quot; (click)=&quot;completeTodo(todoItem)&quot;&gt;&lt;i [className]=&quot;todoItem.completed ? &#39;check-square-o&#39; : &#39;square-o&#39;&quot;&gt;&lt;/i&gt;&lt;/span&gt;
             &lt;span class=&quot;done-{{todoItem.completed}}&quot;&gt;{{todoItem.name}} &lt;small&gt;created: {{todoItem.createdAt | date:&#39;short&#39;}}&lt;/small&gt;&lt;/span&gt;
             &lt;span class=&quot;pull-right&quot; (click)=&quot;deleteTodo(todoItem)&quot;&gt;&lt;i class=&quot;times&quot;&gt;&lt;/i&gt;&lt;/span&gt;
         &lt;/div&gt;
         &lt;/div&gt;
     &lt;/div&gt;
 &lt;/div&gt;
</code></pre>
<p> The html is doing a lot:</p>
<ol>
<li>Show a title for the page</li>
<li>Show a form to add new todo item along with form validation</li>
<li>Show the list of todo list with icons to complete and delete todo items</li>
<li>You can see several Angular ways of implementing functionality using the clauses below:<ul>
<li>*ngIf - replacement for ng-if.  Only show section if condition is true</li>
<li>*ngFor - replacement for ng-repeat.  Loop through a list and do something</li>
<li>[(ngModel)] - two-way data binding</li>
<li>(click) - binds to the click event</li>
<li>[className] - replacement for ngClass and set the css class for the element</li>
<li>(ngModelChange) - runs method when the [(ngModel)] value changes</li>
<li>[hidden] - hides the element when condition is true </li>
<li>(ngSubmit) - submits a form </li>
<li>[formGroup] - used for reactive forms.  basically dynamic forms that you can control in the controller</li>
<li>[disabled] - set the element to disabled when condition is true</li>
</ul>
</li>
</ol>
</li>
<li><p>If you view the site again you should see a UI similar to:</p>
<p> <img src="images/todo-unstyled.png" alt="Todo Unstyled"></p>
</li>
</ol>
<div class="exercise-end"></div>

<h3 id="adding-style">Adding Style</h3>
<h4 class="exercise-start">
    <b>Exercise</b>: Making the UI Pretty
</h4>

<p>Right now the UI looks pretty plain.  The add textbox and add button are on different lines and there is no indication if you have met the requirements to for the todo item to be added.  The only styling right now is the bootstrap classes.  </p>
<p>With Angular 2, we can finally have component level css instead of cluttering up the global css space.  The compoment level css will add an attribute to each of the html element within the components template and update the component scss file to prefix all of the css classes with the attribute.  </p>
<ol>
<li>Open the src\app\todo\todo.component.scss </li>
<li><p>Add the following contents to the file.  To ensure we are following our branding, we are importing our scss color variables.</p>
<pre><code class="lang-scss">  @import &quot;../../assets/bootstrap/variables&quot;;

 .todo-wrapper {
     width: 100%;

     .ng-valid:not(form) {
         border-left: 5px solid $green;
     }

     .ng-invalid:not(form) {
         border-left: 5px solid $red;
     }

     div.todo {
         padding-bottom: .2em;
         padding-top: .2em;
         border-bottom: 1px solid $light-gray; 
         font-size: 1.4em;

         small {
             font-size: .7em;
             color: lightgrey;
         }

         i {
             width: 40px;
             padding-right: 10px;
             vertical-align: middle
         }

         .done-true {
             text-decoration: line-through;
             color: $light-gray;
         }
     }

     .errors {
         padding-top: 10px;
         padding-bottom: 10px;
     }

     form {
         padding-bottom: 1em;
         input[type=&quot;text&quot;] {
             width: 80%;
             float: left;
             font-size: 2em;
             margin-right: 1%;
         }

         button {
             width: 19%;
         }
     }
 }
</code></pre>
</li>
<li><p>Now if you view the UI it should look like below.  </p>
<p> <img src="images/todo-styled.png" alt="unstyled ui"></p>
<ul>
<li>Add form has spacing between the textbox and the button.</li>
<li>There is more padding in the todo item list </li>
<li>The created date is muted with a light gray color</li>
<li>There is a gray line between each of the todo items</li>
<li>The text and icons in the todo list is bigger</li>
<li>There is a red line on the left side of the textbox to indicate it is required.  It will turn green once there is a value in the box. </li>
</ul>
</li>
<li><p>Before we can interact with the data we need to create our service and call the service from the TodoCompoment.</p>
</li>
</ol>
<div class="exercise-end"></div>

				</div>
				<hr>

				<div class="chapter">
					<h2 id="angular-service">Angular Service</h2>
<h3 id="creating-todo-service">Creating Todo Service</h3>
<h4 class="exercise-start">
    <b>Exercise</b>: Creating the Todo Service 
</h4>

<ol>
<li>Create the directory shared\services</li>
<li><p>Run the Angular Cli generate command to create the todo service </p>
<pre><code class="lang-bash"> ng generate service shared\services\todo
</code></pre>
</li>
<li>Open the shared\services\todo.service.ts file that was just generated</li>
<li><p>Add the following import statements </p>
<pre><code class="lang-TypeScript"> import { Todo } from &#39;../classes/todo&#39;;
 import { Http, Headers, Response, Request, RequestMethod, RequestOptions } from &#39;@angular/http&#39;;
 import { Observable } from &#39;rxjs/Rx&#39;;
 import { environment } from &#39;../../../environments/environment&#39;;
</code></pre>
<ul>
<li>../classes/todo is the class the we created earlier</li>
<li>@anglar/http is from angular and allows us to make http calls such as calling our Api</li>
<li>rxjs/Rs gives us Observables which is a replacement for Promises</li>
<li>../../../environments/environment allows us to access the environment variables we setup such as the Api url</li>
</ul>
</li>
<li><p>Right after all of the import statements and before the @Injectable create a variable to hold our Api url.</p>
<pre><code class="lang-TypeScript"> let todoUrl = environment.apiBaseUrl + &#39;/todos&#39;;
 let options = new RequestOptions({ withCredentials: true });
</code></pre>
</li>
<li><p>In the TodoService constructor you need to inject Http</p>
<pre><code class="lang-TypeScript"> constructor(private http: Http) {
 }
</code></pre>
</li>
</ol>
<p>We are now ready to start creating our functions for our CRUD (create, read, update and delete)</p>
<p>Within the TodoService class we will add the CRUD functions.  All of the functions use the http option withCredentials which tells the browser that it is ok to pass the name of the logged in user to the Api.  </p>
<ol>
<li><p>The first thing we are going to add is a standard error handler.  Right now, this function really is just a placeholder until we have a standard for how errors should be handled. </p>
<pre><code class="lang-TypeScript"> // TODO
 // implement exception handling strategy
 private handleError(error: Response) {
     console.log(error);
     return Observable.throw(error.json().error || &#39;Server error&#39;);
 }
</code></pre>
</li>
<li><p>To create new todo items we are going to create the addTodo function.  The Api returns a single Todo item.</p>
<pre><code class="lang-TypeScript"> addTodo(todo: Todo): Observable&lt;Todo&gt; {
     let body = JSON.stringify({
         name: todo.name,
         completed: false
     });

     return this.http.post(todoUrl, body, options)
     .map((res: Response) =&gt; &lt;Todo&gt;res.json())
     .catch(this.handleError);
 }
</code></pre>
</li>
<li><p>To get the list of todo items we will create the getList function.  The api returns an array of Todo items.</p>
<pre><code class="lang-TypeScript"> getList(): Observable&lt;Todo[]&gt; {
     return this.http.get(todoUrl, options)
     .map((res: Response) =&gt; &lt;Todo&gt;res.json())
     .catch(this.handleError);
 }
</code></pre>
</li>
<li><p>To update a todo item we will create the updateTodo function. The Api returns the Todo item that was updated.</p>
<pre><code class="lang-TypeScript"> updateTodo(todo: Todo): Observable&lt;Todo&gt; {
     let body = JSON.stringify({
         name: todo.name,
         completed: todo.completed,
         createdAt: todo.createdAt,
         updatedAt: todo.updatedAt,
         id: todo.id
     });

     return this.http.put(todoUrl + &#39;/&#39; + todo.id, body, options)
     .map((res: Response) =&gt; &lt;Todo&gt;res.json())
     .catch(this.handleError);
 }
</code></pre>
</li>
<li><p>To delete a todo item we will create the deleteTodo function. The Api returns the Todo item that was deleted.</p>
<pre><code class="lang-TypeScript"> deleteTodo(todo: Todo): Observable&lt;Todo&gt; {
     return this.http.delete(todoUrl + &#39;/&#39; + todo.id, options)
     .map((res: Response) =&gt; &lt;Todo&gt;res.json())
     .catch(this.handleError);
 }
</code></pre>
</li>
</ol>
<p>In order to use the TodoService, we need to tell Angular about the service and make it available.</p>
<ol>
<li>Open the src\app\app.module.ts file</li>
<li><p>Import the TodoService</p>
<pre><code class="lang-TypeScript"> import { TodoService } from &#39;./shared/services/todo.service&#39;;
</code></pre>
</li>
<li><p>In the @NgModule providers list you need to add the TodoService</p>
<pre><code class="lang-TypeScript"> providers: [TodoService],
</code></pre>
<div class="exercise-end"></div>


</li>
</ol>
<h3 id="call-service-from-todo-component">Call Service from Todo Component</h3>
<h4 class="exercise-start">
    <b>Exercise</b>: Import TodoService
</h4>

<p>In order to use the TodoService within the TodoComponent, we need to import the TodoService and inject it into the construct of the TodoComponent</p>
<ol>
<li><p>Add the following import statements</p>
<pre><code class="lang-TypeScript"> import { TodoService } from &#39;../shared/services/todo.service&#39;;
</code></pre>
</li>
<li><p>Add the TodoService to the construct parameters like the following.  This will automatically create a scoped variable called todoService that can be used from within the TodoCompoment.</p>
<pre><code class="lang-TypeScript"> constructor(private formBuilder: FormBuilder, private todoService: TodoService) {
     this.addForm = formBuilder.group({
     &#39;name&#39;: [&#39;&#39;, [Validators.required]]
     });
 }
</code></pre>
</li>
</ol>
<div class="exercise-end"></div>

<h4 class="exercise-start">
    <b>Exercise</b>: Get Data
</h4>

<p>In order to get data from our service, we need to call the getList function that is part of the TodoService.  This function returns an Observable<Todo[]>  which is an array of the Todo class.  In order to consume the Observable we need to use the subscribe method.  </p>
<ol>
<li><p>After the ngOnInit function add the following function to get the count of open todo items</p>
<pre><code class="lang-TypeScript"> calculateOpenItems(): void {
     this.openItemCount = this.todoList.filter(item =&gt; item.completed === false).length;
 }
</code></pre>
</li>
<li><p>After the ngOnInit function within the TodoComponent add the following function</p>
<pre><code class="lang-TypeScript"> getTodoListAll(): void {
     this.todoService.getList()
     .subscribe(
         data =&gt; {
             this.todoList = data;
             this.calculateOpenItems();
         },
         error =&gt; {
             this.errorMessage = &lt;any&gt;error;
             console.log(&#39;error getting list&#39;, this.errorMessage);
         }
     );
 }
</code></pre>
</li>
<li><p>In the ngOnInit function you need to call the getListAll function</p>
<pre><code class="lang-TypeScript"> this.getTodoListAll();
</code></pre>
</li>
</ol>
<div class="exercise-end"></div>


<h4 class="exercise-start">
    <b>Exercise</b>: Add New Todo Record
</h4>

<p>In order to create new todo item we need to call the addTodo function that is part of the TodoService.  This function returns an Observable<Todo>  which is a single instance of the Todo class.  In order to consume the Observable we need to use the subscribe method.  </p>
<p>Insert the createTodo function after the getTodoListAll function</p>
<pre><code class="lang-TypeScript">createTodo(): void {
    this.submitting = true;
    this.errorMessage = &quot;&quot;;

    this.todoService.addTodo(this.todo)
    .subscribe(
        data =&gt; {
            this.submitting = false;           
            this.todoList.push(data); // add to list
            this.openItemCount++; // update open count
            this.addForm.reset(); // reset the form to original state
        },
        error =&gt; {
            this.submitting = false;
            this.errorMessage = &lt;any&gt;error;
            console.log(&#39;create error&#39;, this.errorMessage);
        }
    );
}
</code></pre>
<div class="exercise-end"></div>

<h4 class="exercise-start">
    <b>Exercise</b>: Complete Todo 
</h4>

<p>In order to complete a todo item we need to call the completeTodo function that is part of the TodoService.  This function returns an Observable<Todo>  which is a single instance of the Todo class.  In order to consume the Observable we need to use the subscribe method.  </p>
<p>Insert the completeTodo function after the createTodo function</p>
<pre><code class="lang-TypeScript">completeTodo(todo: Todo): void {
    todo.completed = !todo.completed;
    this.todoService.updateTodo(todo)
        .subscribe(
            data =&gt; {
                this.calculateOpenItems();
            },
            error =&gt; {
                todo.completed = !todo.completed;
                this.errorMessage = &lt;any&gt;error;
                console.log(&#39;complete error&#39;, this.errorMessage);
            }
        );
}
</code></pre>
<div class="exercise-end"></div>

<h4 class="exercise-start">
    <b>Exercise</b>: Delete Todo
</h4>

<p>In order to delete a todo item we need to call the deleteTodo function that is part of the TodoService.  When you delete a record with a Sails API, it returns back the record that we just deleted hence the deleteTodo function returns an Observable<Todo>.  In order to consume the Observable we need to use the subscribe method.  After the item is delete from the data store, we remove it from the todoList array.</p>
<p>Insert the deleteTodo function after the completeTodo function</p>
<pre><code class="lang-TypeScript">deleteTodo(todo: Todo): void {
    this.todoService.deleteTodo(todo)
        .subscribe(
            data =&gt; {
                let item = this.todoList.indexOf(todo);
                this.todoList.splice(item, 1);
                this.calculateOpenItems();
            },
            error =&gt; {
                this.errorMessage = &lt;any&gt;error;
                console.log(&#39;delete error&#39;, this.errorMessage);
            }
        );
}
</code></pre>
<div class="exercise-end"></div>

<h3 id="sort-in-the-ui">Sort in the UI</h3>
<h4 class="exercise-start">
    <b>Exercise</b>: Sorting in the Client
</h4>

<p>Right now the data from the API comes back sorted, kind of.  It is case sensitive and sorts name and then completed state.  However, as you interact with the UI creating, completing and deleting todo item, the list does not stay sorted.  In order to make it stay sorted, we need to add a sorting method in the UI.  </p>
<p>The sorting method needs to be case insensitive and sort by multiple fields (name and completed).  </p>
<p>With ES6 and TypeScript we can use a map and reduce function to accomplish this task.  We can even have it sort if needed in decending order by appending on a - sign to the field name.</p>
<pre><code class="lang-TypeScript"> fieldSorter(fields, ignoreCase) {
    return (a, b) =&gt; fields.map(o =&gt; {
      let dir = 1;
      if (o[0] === &#39;-&#39;) { dir = -1; o = o.substring(1); }
      if (ignoreCase === true &amp;&amp; typeof a[o] === &#39;string&#39; &amp;&amp; typeof b[o] === &#39;string&#39;) {
        a[0] = a[o].toLocaleLowerCase();
        b[o] = b[o].toLocaleLowerCase();
      }

      return a[o] &gt; b[o] ? dir : a[o] &lt; b[o] ? -(dir) : 0;
    }).reduce((p, n) =&gt; p ? p : n, 0);
  }
</code></pre>
<p>Now that we have our generic sorting method, we can create a function to do the actual sorting</p>
<pre><code class="lang-TypeScript">sortItems(): void {
    this.todoList.sort(this.fieldSorter([&#39;completed&#39;, &#39;name&#39;], true));
}
</code></pre>
<p>The last thing we need to do is to call the sortItems function in the createTodo, completeTodo and deleteTodo in the subscribe function</p>
<pre><code>this.sortItems();
</code></pre><p>When you use interact with the UI to view, create, complete, and delete todo items, the list will stay sorted by name and then complete state.  The sort is case insensitive and the open items should be on the top of the list.</p>
<div class="exercise-end"></div>

				</div>
				<hr>
				<div class="chapter">
					<h2 id="create-typescript-class">Create TypeScript class</h2>
<h4 class="exercise-start">
    <b>Exercise</b>: Creating an Object to Hold Data
</h4>

<p>Before we implement our UI we need to create a class that will be used to hold all of the data for a todo item.  By creating classes, it gives us type safety and contract for what the data should look like.</p>
<p>To generate our class, we are going to use the Angular CLI.  The command below will create a todo.ts file in the src\app\todo directory</p>
<ol>
<li>Create the directory shared\interfaces</li>
<li><p>Run the Angular Cli generate command to create the todo.ts file</p>
<pre><code class="lang-bash"> ng g class shared\classes\todo
</code></pre>
</li>
<li><p>Open the todo.ts file and add the following variables to the todo class.  The id, createdAt, and updatedAt are supplied from the Api. Note that the constructor is helpful in instantiating objects during testing.</p>
<pre><code class="lang-javascript"> export class Todo {
     constructor(
         name: string = &#39;&#39;,
         completed: boolean = false,
         id: string = &#39;&#39;,
         createdAt: Date = new Date(),
         updatedAt: Date = new Date()
     ) {
         this.name = name;
         this.completed = completed;
         this.id = id;
         this.createdAt = createdAt;
         this.updatedAt = updatedAt;
     }

     name: string;
     completed: boolean
     id: string;
     createdAt: Date;
     updatedAt: Date;
 }
</code></pre>
</li>
</ol>
<div class="exercise-end"></div>    
				</div>
				<hr>

				<div class="chapter">
					<h2 id="environment-configuration">Environment Configuration</h2>
<p>One of the requirements that you commonly have it to be able to change configurations for your application based on the environment it is running in.  A common configuration is to change the API url between development and production.  In order to change the configurations for different environments, Angular uses configurations files that are stored in the src\environments folder.  </p>
<h3 id="default-configuration">Default Configuration</h3>
<p>The src\environments\environment.ts file is the default configurations if no environment is specified when running <code>ng serve</code></p>
<p>In the environment.ts we need to add the environmentName and apiBaseUrl values.  The apiBaseUrl is how to get to your service layer, if you have one.  For now we are going to use localhost:1337/v1.</p>
<h4 class="exercise-start">
    <b>Exercise</b>: Setup Default Configuration
</h4>

<ol>
<li>Open the src\environments\environment.ts file</li>
<li><p>Add the environmentName and apiBaseUrl values.  </p>
<pre><code class="lang-TypeScript"> export const environment = {
     production: false,
     environmentName: &#39;Development&#39;,
     apiBaseUrl: &#39;http://localhost:1337/v1&#39;
 };
</code></pre>
</li>
<li><p>Go to the terminal that is running the <code>ng serve</code> command and do a ctrl+c to stop it.</p>
</li>
<li><p>Run the <code>ng serve</code> command again.</p>
<pre><code class="lang-bash"> ng serve
</code></pre>
</li>
<li><p>Everything should still start as normal.  You will not see any changes at this point since nothing is using those settings.  We will use them when we create our footer.</p>
</li>
</ol>
<div class="exercise-end"></div>

<h3 id="local-development">Local Development</h3>
<p>The other environment that is typically created is for local development on your machine.  For this tutorial the environment.ts and local.ts have the same values but once you go to development and production they will differ.   </p>
<h4 class="exercise-start">
    <b>Exercise</b>: Create Local Configuration
</h4>

<ol>
<li>Create the file src\environments\environment.local.ts file</li>
<li><p>Add the following to the environment.local.ts file</p>
<pre><code class="lang-TypeScript"> export const environment = {
 production: false,
 environmentName: &#39;Local&#39;,
 apiBaseUrl: &#39;http://localhost:1337/v1&#39;
 };
</code></pre>
</li>
<li><p>Open the .angular-cli.json that is in the root of the project.  </p>
</li>
<li><p>Find the apps\environments section and add the local configuration to the at the top of the list of environments</p>
<pre><code class="lang-json"> &quot;local&quot;: &quot;environments/environment.local.ts&quot;,
</code></pre>
</li>
<li><p>If you want to run the local configuration we need to pass in the environment command line argument.  The environment argument value is the name of the environment name in the angular-cli.json file.  Note that you can only have 1 ng serve running at a time.    </p>
<pre><code class="lang-bash"> ng serve -e local
</code></pre>
</li>
<li><p>If the webpack compile was successful, you will now be using the local environment configuration. You will not see any changes at this point since nothing is using those settings.  We will use them when we create our footer.</p>
</li>
</ol>
<div class="exercise-end"></div>

<h4 class="exercise-start">
    <b>Exercise</b>: Add Environment Name to Footer
</h4>

<ol>
<li><p>Open the src\app\shared\footer\footer.component.ts file and import the environment into the file on line 2 right below the Angular core import</p>
<pre><code class="lang-TypeScript"> import { environment } from &#39;../../../environments/environment&#39;;
</code></pre>
</li>
<li><p>Inside the FooterComponent class we to add a variable to capture the environment name that Angular is running in</p>
<pre><code class="lang-TypeScript"> public env = environment.environmentName;
</code></pre>
</li>
<li><p>Open the src\app\shared\footer\footer.component.html and replace the contents with</p>
<pre><code> &lt;footer&gt;
     &lt;div class=&quot;pull-right&quot;&gt;
         env: {{ env }} 
     &lt;/div&gt;
     &lt;div class=&quot;pull-left&quot;&gt;
         &amp;copy;Angular WS
     &lt;/div&gt;
 &lt;/footer&gt;
</code></pre></li>
<li><p>If you view the web page you should see the footer </p>
<p><img src="images/footer-development.png" alt="App Works with Footer"></p>
<div class="alert alert-warning" role="alert">
    Notice that the env:Local in the footer is coming from the environment.local.ts file.  If you stop <code>ng serve</code> and run it without using the -e argument, the env value will change to Development

    <img src="images/footer-development.png" alt="footer development env">

</div>

</li>
</ol>
<div class="exercise-end"></div>    


				</div>

				<hr>
				<div class="chapter">
					<h2 id="locking-down-routes">Locking Down Routes</h2>
<h3 id="create-guard">Create Guard</h3>
<h4 class="exercise-start">
  <b>Exercise</b>: Create Guard
</h4>

<ol>
<li>Create the file src\app\shared\guards\admin.guard.ts</li>
<li><p>Make the contents of the admin.guard.ts file.  Right now the canActivate return a true.  To block access set it to return false.  Normally the canActivate would call your authentication code to validate the user access.  </p>
<pre><code class="lang-TypeScript">import { Injectable } from &#39;@angular/core&#39;;
import { AuthenticationService } from &#39;../services/authentication.service&#39;;
import { CanActivate } from &#39;@angular/router&#39;;

@Injectable()
export class AdminGuard implements CanActivate {
 constructor(private authService: AuthenticationService) { }

 canActivate(): boolean {
   return true;
 }
}
</code></pre>
</li>
</ol>
<div class="exercise-end"></div>

<h4 class="exercise-start">
  <b>Exercise</b>: Add Guard to Module
</h4>

<ol>
<li>Open the app.module.ts </li>
<li><p>Import the AdminGuard</p>
<pre><code class="lang-TypeScript">import { AdminGuard } from &#39;./shared/guards/admin.guard&#39;;
</code></pre>
</li>
<li><p>Add the AdminGuard to the providers list</p>
<pre><code class="lang-TypeScript">providers: [TodoService, AdminGuard],
</code></pre>
</li>
</ol>
<div class="exercise-end"></div>

<h3 id="update-route-with-guard">Update Route With Guard</h3>
<h4 class="exercise-start">
  <b>Exercise</b>: Add Guard to Route
</h4>

<ol>
<li><p>Generate the admin and NotAuthorized components</p>
<pre><code class="lang-TypeScript">ng component admin
</code></pre>
<pre><code class="lang-TypeScript">ng component NotAuthorized
</code></pre>
</li>
<li><p>Open the src\app\app-routing.module.ts</p>
</li>
<li><p>Import the AdminGuard</p>
<pre><code class="lang-TypeScript">import { AdminGuard } from &#39;./shared/guards/admin.guard&#39;;
</code></pre>
</li>
<li><p>Add a new unauthorized route that loads the NotAuthorizedComponent</p>
<pre><code class="lang-TypeScript">{ path: &#39;unauthorized&#39;, component: NotAuthorizedComponent },
</code></pre>
</li>
<li><p>Add a new admin route that loads the AdminComponent and has a canActivate attribute that calls the AdminGuard.  Note that the canActive value is an array.</p>
<pre><code class="lang-TypeScript">{ path: &#39;admin&#39;, component: AdminComponent, canActivate: [AdminGuard]  },
</code></pre>
</li>
<li><p>If you navigate to <a href="http://localhost:4200/admin">http://localhost:4200/admin</a> you will be able to get into the route since canActivate is returning true.</p>
<p><img src="images/admin-view.png" alt="Admin View"></p>
</li>
</ol>
<div class="exercise-end"></div>

<h4 class="exercise-start">
  <b>Exercise</b>: Test Unauthorized Access
</h4>

<p>To test that the guard is working, we need to return a false from canActivate and redirect to the unauthorized route.  </p>
<ol>
<li><p>In the admin.guard.ts file, change the canActivate route to the following</p>
<pre><code class="lang-TypeScript"> canActivate(): boolean {
 this.router.navigate([&#39;/unauthorized&#39;]);
 return false;
}
</code></pre>
</li>
<li><p>Import the router into the admin.guard.ts file</p>
<pre><code class="lang-TypeScript">import { Router } from &#39;@angular/router&#39;;
</code></pre>
</li>
<li><p>Inject the Router into the constructor</p>
<pre><code class="lang-TypeScript">constructor(private router: Router) { }
</code></pre>
</li>
<li><p>Now if you navigate to <a href="http://localhost:4200/admin">http://localhost:4200/admin</a> you will be redirected to the unauthorized route</p>
<p><img src="images/unauthorized-view.png" alt="unauthorized view"></p>
</li>
</ol>
<div class="exercise-end"></div>

<h3 id="implementing-real-authentication">Implementing Real Authentication</h3>
<p>So far we have just been testing out the authentication with hard coded values within the UI.  Authorization should be done on the server side as it is very easy to forge and change the authorization on the client just by using the browser developer tools. </p>
<p>With our Sails API, we have implemented a policy that stores the user profile in a user object and then returns back a cookie with the user profile information that includes if the user is an admin or not for the client to use.</p>
<div class="alert alert-danger" role="alert">
For testing purposes, I have created different routes and policies to return back cookies with the admin flag set and without the admin flag set.  Normally, you would use just 1 policy and not have seperate routes.
</div>

<h4 class="exercise-start">
  <b>Exercise</b>: Install Cookie Library
</h4>

<p>To read the cookie information returned from the Sails API, we are going to use the angular2-cookie npm package</p>
<ol>
<li>From the integrated termainal, stop the ng server process from running</li>
<li><p>Run the following command to install the angular2-cookie library from npm and store it in the dependencies section of the package.json file</p>
<pre><code class="lang-bash">npm install --save angular2-cookie
</code></pre>
</li>
</ol>
<div class="exercise-end"></div>

<h4 class="exercise-start">
  <b>Exercise</b>: Add angular2-cookie to module
</h4>

<ol>
<li>Open the src\app\app.module.ts file </li>
<li><p>Import the angular2-cookis CookieService.  To workaround an issue with the Ahead Of Time compliation, there is a little bit more work to do with this import than we normally would have</p>
<pre><code class="lang-TypeScript">// FIX: https://github.com/salemdar/angular2-cookie/issues/37
import { CookieService, CookieOptions } from &#39;angular2-cookie/core&#39;;
export function cookieServiceFactory() {
   return new CookieService();
}
</code></pre>
</li>
<li><p>Add the CookieService and CookieOptions to the module providers list</p>
<pre><code class="lang-TypeScript">, { provide: CookieService, useFactory: cookieServiceFactory }, { provide: CookieOptions, useValue: {} }
</code></pre>
</li>
</ol>
<div class="exercise-end"></div>

<h4 id="creating-utility-service">Creating Utility Service</h4>
<p>With our API calls, we want to ensure that we always call the Sails API initially to get the user cookie.  If we waiting until the guard was called, we would not be able to change things like menus and other options from within the site that an admin might also see.  To ensure we make the call on AppComponent load. we are going to create a UtilityService that is called within the App Page ngOnInit function.  The ngOnInit lifecycle function we run once the component has loaded.</p>
<h4 class="exercise-start">
  <b>Exercise</b>: Create the UtilityService
</h4>

<ol>
<li><p>From the integrated termainal generate a new service called UtilityService that is stored in the src\app\shared\services folder.</p>
<pre><code class="lang-TypeScript">ng g service shared\services\Utility
</code></pre>
</li>
<li><p>Open the src\app\app.module.ts file</p>
</li>
<li><p>Import the UtilityService</p>
<pre><code class="lang-TypeScript">import { UtilityService } from &#39;./shared/services/utility.service&#39;;
</code></pre>
</li>
<li><p>Add the UtilityService to the list of providers</p>
<pre><code class="lang-TypeScript">providers: [TodoService, AdminGuard, { provide: CookieService, useFactory: cookieServiceFactory }, { provide: CookieOptions, useValue: {} }, UtilityService],
</code></pre>
</li>
<li><p>Open the src\app\shared\services\utility.service.ts file</p>
</li>
<li><p>Make the contents the following to call the Sails utility/version route</p>
<pre><code class="lang-TypeScript">import { Injectable } from &#39;@angular/core&#39;;
import { Http, Headers, Response, RequestOptions } from &#39;@angular/http&#39;;
import { Observable } from &#39;rxjs/Rx&#39;;

import { environment } from &#39;../../../environments/environment&#39;;

let apiUrl = environment.apiBaseUrl;
let httpRequestOptions = new RequestOptions( { withCredentials: true } );

@Injectable()
export class UtilityService {
 constructor(private _http: Http) { }

 getApiBuild() {
   let url = apiUrl + &#39;/utility/version&#39;;
   return this._http.get(url, httpRequestOptions)
     .map(data =&gt; data.json())
     .catch(this.handleError);
 }

 // TODO
 // implement exception handling strategy
 private handleError(error: Response) {
   console.log(error);
   return Observable.throw(error.json().error || &#39;Server error&#39;);
 }
}
</code></pre>
</li>
</ol>
<div class="exercise-end"></div>

<h4 class="exercise-start">
  <b>Exercise</b>: Update the AppComponent to Call the UtilityService
</h4>

<ol>
<li>Open the src\app\app.Component.ts file</li>
<li><p>Add OnInit to the @angular/core import</p>
<pre><code class="lang-TypeScript">import { Component, OnInit } from &#39;@angular/core&#39;;
</code></pre>
</li>
<li><p>To the AppComponent class definition add an &quot;implements OnInit&quot;</p>
<pre><code class="lang-TypeScript">export class AppComponent implements OnInit {
</code></pre>
</li>
<li><p>Add a variable called apiBuild that is a type of number after the title variable</p>
<pre><code class="lang-TypeScript">apiBuild: number;
</code></pre>
</li>
<li><p>Add a constructor and inject the UtilityService</p>
<pre><code class="lang-TypeScript">constructor(private utilityService: UtilityService) { }
</code></pre>
</li>
<li><p>Add an ngOnInit after the constructor  and with the ngOnInit call the UtilityService getApiBuild and store the result in the apiBuild variable</p>
<pre><code class="lang-TypeScript">ngOnInit() {
 this.utilityService.getApiBuild()
   .subscribe(
   data =&gt; this.apiBuild = data.build,
   err =&gt; console.log(`Get UI Build failed: ${err}`)
   );
}
</code></pre>
</li>
</ol>
<div class="exercise-end"></div>

<h4 class="exercise-start">
  <b>Exercise</b>: Update Footer with Api Build Info
</h4>

<ol>
<li>Open the src\app\shared\footer\footer.component.ts file</li>
<li><p>Add Input to the @angular/core import</p>
<pre><code class="lang-TypeScript">import { Component, OnInit, Input } from &#39;@angular/core&#39;;
</code></pre>
</li>
<li><p>Within the FooterComponent class, add an @Input variable to hold the apiBuild that will be passed from the AppComponent</p>
<pre><code class="lang-TypeScript">@Input() apiBuild: number;
</code></pre>
<div class="alert alert-info" role="alert">
The @Input is used when you want to pass a value as an Html property when you use the component from the parent component.  In this case the AppComponent will pass the value to the FooterComponent.
</div>
</li>
<li><p>Open the src\app\shared\footer\footer.component.html file</p>
</li>
<li><p>Replace the line that outputs the env value with the following line to output both the env and apiBuild values.</p>
<pre><code class="lang-TypeScript">env: {{ env }} &amp;nbsp;|&amp;nbsp; API: {{apiBuild}}
</code></pre>
</li>
<li><p>Open the src\app\app.component.html </p>
</li>
<li><p>To the app-footer html add an apiBuild property that is set to apiBuild</p>
<pre><code class="lang-html">&lt;app-footer [apiBuild]=&quot;apiBuild&quot;&gt;&lt;/app-footer&gt;
</code></pre>
<div class="alert alert-info" role="alert">
The brackets around apiBuild tell Angular to data bind the property with the value of the variable apiBuild. 
</div>
</li>
<li><p>If you run ng serve and look at the page, you should now see an apibuild value in the footer</p>
<p><img src="images/footer-apibuild.png" alt="ApiBuild in Footer"></p>
<div class="alert alert-info" role="alert">
A side benefit to having the apiBuild number in the footer, is that you know exactly which version of the Api the UI is going against.  Also when you update the API you can make sure that the UI is not caching the API results. Later on in the deployment chapter, we will add the UI build version into the footer.
</div>


</li>
</ol>
<div class="exercise-end"></div>


<h4 id="implement-the-authentication-service">Implement the Authentication Service</h4>
<p>Now that we the utility service capturing the user profile cookie information, we are ready to create the Authentication Service that will be used in the AdminGuard.</p>
<h4 class="exercise-start">
  <b>Exercise</b>: Create the Authentication Service
</h4>

<ol>
<li>Open the integrated terminal</li>
<li><p>In the src\app\shared\services folder create new service called AuthenticationService</p>
<pre><code class="lang-TypeScript">ng g service shared\services\authentication
</code></pre>
</li>
</ol>
<p>Now we need to import the service and add it to the providers list for the module.</p>
<ol>
<li>Open the src\app\app.module.ts file</li>
<li><p>Add the AuthenticationService to the list of imports</p>
<pre><code class="lang-TypeScript">import { AuthenticationService } from &#39;./shared/services/authentication.service&#39;;
</code></pre>
</li>
<li><p>Add the AuthenticationService to the module&#39;s providers list</p>
<pre><code class="lang-TypeScript">providers: [TodoService, AdminGuard, { provide: CookieService, useFactory: cookieServiceFactory }, { provide: CookieOptions, useValue: {} }, UtilityService, AuthenticationService],
</code></pre>
</li>
</ol>
<p>Now we are ready to write the code for the AuthenticationService</p>
<ol>
<li>Open the src\app\shared\services\authentication.service.ts file</li>
<li><p>Since we are going to be reading a cookie, we need to import the CookieService</p>
<pre><code class="lang-TypeScript">import { CookieService } from &#39;angular2-cookie/services/cookies.service&#39;;
</code></pre>
</li>
<li><p>We are also going to give the ability to redirect if not an admin to the unauthorized route, so we need to import the Router as well</p>
<pre><code class="lang-TypeScript">import { Router } from &#39;@angular/router&#39;;
</code></pre>
</li>
<li><p>Before the @Injectable for the service, add a let variable to hold the cookie name to look for</p>
<pre><code class="lang-TypeScript">let cookieName: string = &quot;sails-tutorial-user&quot;;
</code></pre>
</li>
<li><p>Now we need to inject both the CookieService and Router into the constructor</p>
<pre><code class="lang-TypeScript">constructor(private cookieService: CookieService,
 private router: Router) { }
</code></pre>
</li>
<li><p>Next we need to create 3 variables in the AuthenticationService class to hold if they are an admin, if the service is ready with the cookie, and what is the cookie name to use.  </p>
<pre><code class="lang-TypeScript">private admin: boolean;
private ready: boolean;
</code></pre>
</li>
</ol>
<p>Now we are ready to create our functions </p>
<ol>
<li><p>The first function we are creating is called getCookie and it is used to get a cookie from the CookieService</p>
<pre><code class="lang-TypeScript">private getCookie(key: string) {
 return this.cookieService.get(key);
}
</code></pre>
</li>
<li><p>Next we are going to create an isReady function that is used to determine if the cookie is avaiable yet.  It uses a promise to wait for the cookie to be ready.  This allows us to have our first page be an admin page and still be able to validate access with the cookie when it is ready.  </p>
<pre><code class="lang-TypeScript">private isReady(): Promise&lt;boolean&gt; {
 var self = this;
 return new Promise(function (resolve, reject) {
   if (typeof self.ready === &#39;undefined&#39;) {
     var intervalReady = setInterval(function () {
       if (self.getCookie(cookieName)) {
         clearInterval(intervalReady);
         self.ready = true;
         resolve(self.ready);
       }
     }, 250);
   }
   else {
     resolve(self._ready);
   }
 });
}
</code></pre>
</li>
<li><p>Next we are going go create a function to check if the user is authorized which checks the cookie for the admin field to be true.  The functions is marked private as it is only called interally within the service.</p>
<pre><code class="lang-TypeScript">private isAuthorized(key: string): boolean {
 var user = null;
 var authorized = false;
 var temp = this.getCookie(cookieName);

 if (typeof temp === &quot;string&quot;) {
   user = JSON.parse(temp);
 }

 if (user &amp;&amp; user.admin &amp;&amp; /admin/.test(key)) {
   authorized = true;
 }

 return authorized;
}
</code></pre>
</li>
<li><p>The last function is the one that will be exposed to the rest of the application as a public function.  It checks that the cookie is available and then checks that the admin field is true.  If the admin field is not true then it can redirect the user to the unauthorized route.</p>
<pre><code class="lang-TypeScript">public isAdmin(withRedirect: boolean): Promise&lt;boolean&gt; {
 var self = this;
 return new Promise(function (resolve, reject) {
   if (typeof self.admin === &#39;undefined&#39;) {
     return self.isReady().
       then(function (readyResult) {
         self.admin = self.isAuthorized(&#39;admin&#39;);
         if (!self.admin &amp;&amp; withRedirect) {
           self.router.navigate([&#39;/unauthorized&#39;]);
         }
         resolve(self.admin);
       });
   }
   else {
     resolve(self.admin)
   }
 });
}
</code></pre>
</li>
</ol>
<div class="exercise-end"></div>


<h4 class="exercise-start">
  <b>Exercise</b>: Update AdminGuard to Use AuthenticationService
</h4>

<ol>
<li>Open the src\app\shared\guards\admin.guard.ts</li>
<li><p>You can remove the router import statement since we will not be using it directly in the AdminGuard anymore.</p>
<pre><code class="lang-TypeScript">import { Router } from &#39;@angular/router&#39;;
</code></pre>
</li>
<li><p>Import the AuthenticationService</p>
<pre><code class="lang-TypeScript">import { AuthenticationService } from &#39;../services/authentication.service&#39;;
</code></pre>
</li>
<li><p>Inject the AuthenticationService into the constructor</p>
<pre><code class="lang-TypeScript">constructor(private authenticationService: AuthenticationService) { }
</code></pre>
</li>
<li><p>Replace the canActivate function with the following.  The function now returns a Promise<boolean> and calls the AuthenticationService isAdmin function with the flag to redirect to unauthorized if not an admin</p>
<pre><code class="lang-TypeScript"> canActivate(): Promise&lt;boolean&gt; {
 var isAdmin = this.authenticationService.isAdmin(true);
 return isAdmin;
}
</code></pre>
</li>
</ol>
<p>In order for the cookies to be available, we can&#39;t continue to use the localhost url since the browsers do not support cross domain cookies.  Typically, we do not have this issue since we would be running both the Angular and Sails APIs on your local development machines.  Luckily, we can get around this restriction on cross domain cookies, but changing how we run ng serve and the url that we use for the site.  </p>
<ol>
<li>Stop the ng serve that you have running</li>
<li><p>Restart the ng serve command with the -H parameter along with any other parameters you were using before.  The -H 0.0.0.0 will make the web site available on your computer name.</p>
<pre><code class="lang-bash">ng serve -H 0.0.0.0
</code></pre>
<div class="alert alert-danger" role="alert">Warning: By running with the -H other people can also get to your website by using your computer name and port number 4200</div>
</li>
<li><p>If you navigate to <a href="http://??????/admin">http://??????/admin</a>, you should be able to get into the admin component.  Right now the cookie that is returned from the UtilityService API call has the admin flag set to true.</p>
<ul>
<li><p>Replace the &quot;YourComputerName&quot; in the above url with the actual name of your computer.  Find your computer name on Windows by using the VSCode integrated terminal and running the following powershell snippet</p>
<pre><code class="lang-bash"> $env:computername
</code></pre>
</li>
</ul>
</li>
<li><p>If you open up the Chrome Developer Tools (press F12) and inspect the cookies, you will see 2 cookies, sails-tutorial-sid-default and sails-tutorial-user.  To get to the cookies, click on the Application tab, Expand Cookies under Storage, and click on the <a href="http://?????:4200">http://?????:4200</a> url.</p>
<p><img src="images/cookies.png" alt="Cookies"></p>
</li>
</ol>
<div class="exercise-end"></div>

<h4 class="exercise-start">
  <b>Exercise</b>: Test AdminGuard Unauthorized
</h4>

<p>Since we are faking out the admin access control in order to do a tutorial that shows off being an admin and not an admin, we need to change the API that we are using to get the cookie from the API to another API endpoint that will return admin is false in the cookie.</p>
<ol>
<li>Open the src\app\shared\services\utility.service.ts file</li>
<li><p>In the getApiBuild function, change the url that is used to </p>
<pre><code>let url = apiUrl + &#39;/version&#39;;
</code></pre></li>
<li><p>If you now navigate to or refresh <a href="http://?????:4200">http://?????:4200</a>, you should get redirected to the unauthorized page</p>
</li>
<li><p>Make sure when you are done testing to change the url back to</p>
<pre><code class="lang-TypeScript"> let url = apiUrl + &#39;/utility/version&#39;;
</code></pre>
</li>
</ol>
<div class="exercise-end"></div>

				</div>
				<hr>
				<div class="chapter">
					<h2 id="implementing-default-route">Implementing Default Route</h2>
<p>We have not yet implemented a default route.  If you add anything to the end of the url, Angular will error out that it can not match it to any of the known routes.  You can see this error in the Chrome Developer Tools Console.</p>
<p><img src="images/ng2/no-route-found.png" alt="no route found"></p>
<p>There are 2 ways to fix this.  </p>
<ol>
<li>Make the TodoComponent the default so that it will redirect the user to that page.  This is not as nice of a user experience since it does not alert the user that the url they were trying to go to does not exist.</li>
<li>Create a &quot;Not Found&quot; component and redirect the user to that component if none of the other routes match.  This is the preferred method.</li>
</ol>
<h3 id="add-default-route">Add Default Route</h3>
<h4 class="exercise-start">
    <b>Exercise</b>: Adding Default Route 
</h4>

<div class="alert alert-danger" role="alert">
<strong>Note:</strong> Not the preferred method.<br></div>

<ol>
<li>Open the app.routing.ts file</li>
<li><p>Add an additional route to the Routes list with a ** for the path and set the component to TodoComponent.  This will tell Angular to use the TodoComponent when it can not determine the route</p>
<pre><code class="lang-TypeScript"> , { path: &#39;**&#39;, component: TodoComponent }
</code></pre>
 <div class="alert alert-warning">
 Make sure that you make the default route the last route.  Any routes below the ** route will be ignored.
 </div>

</li>
</ol>
<div class="exercise-end"></div>

<h3 id="create-not-found-component">Create Not Found Component</h3>
<h4 class="exercise-start">
    <b>Exercise</b>: Redirecting User to &quot;Not Found&quot; component
</h4>

<div class="alert alert-success" role="alert">
<strong>Note:</strong> This is the preferred method.<br></div>

<p>From a user experience perspective, it is a much experience to redirect the user to a &quot;not found&quot; page instead of redirecting them back to the home page.  Create the route not found page is just like we did with the todo component.    </p>
<ol>
<li><p>Run the Angular Cli generate command to create the notFound component</p>
<pre><code class="lang-bash"> ng generate component notFound
</code></pre>
</li>
<li><p>4 files are created just like when we created the TodoComponent earlier.  You will notice this time though that the Angular Cli put a dash between not and found.  It will automatically do that when it encounters an uppercase character.</p>
<p> <img src="images/ng2/notfound-generated.png" alt="not found generated file list"></p>
</li>
<li><p>In the src\app\app.module.ts file you may need to add an import statement for the NotFoundComponent and add it to the declarations list to make it available.  Sometimes the Angular CLI adds it automatically for you</p>
<pre><code class="lang-TypeScript"> import { NotFoundComponent } from &#39;./not-found/not-found.component&#39;;
</code></pre>
<pre><code class="lang-TypeScript"> declarations: [
     AppComponent,
     HeaderComponent,
     FooterComponent,
     TodoComponent,
     NotFoundComponent
 ],
</code></pre>
</li>
<li><p>In the src\app\app-routing.module.ts file, add an import statement for the NotFoundComponent </p>
<pre><code class="lang-TypeScript"> import { NotFoundComponent } from &#39;./not-found/not-found.component&#39;;
</code></pre>
</li>
<li><p>In the app-routing.module.ts file, change the ** route to use the NotFoundComponent</p>
<pre><code class="lang-TypeScript"> , { path: &#39;**&#39;, component: NotFoundComponent }
</code></pre>
</li>
<li><p>If you now try to navigate to <a href="http://localhost:4200/unknown">http://localhost:4200/unknown</a> you will be shown the NotFoundComponent </p>
<p> <img src="images/view-route-unknown.png" alt="Not Found View"></p>
</li>
</ol>

				</div>
				<hr>

				<div class="chapter">
					<h2 id="deploying">Deploying</h2>
<h3 id="production-build">Production Build</h3>
<p>Before deploy you will need to run an a build with the Angular CLI.  With the build you can tell it the environment to use and if it is a production build or not.  A production will minify everything.</p>
<div class="alert alert-info" role="alert">
Note the build create a dist folder to hold the output.   This directory is removed before each build
</div>

<p>Select which type of build you want to run:  Non-Production or Production</p>
<h4 class="exercise-start">
  <b>Exercise</b>: Running Non-Production Build
</h4>

<p>Run the following command to run a build that uses the environment.ts file and is not a production build</p>
<pre><code class="lang-bash">ng build
</code></pre>
<div class="exercise-end"></div>

<h4 class="exercise-start">
  <b>Exercise</b>: Running a Production Build
</h4>

<div class="alert alert-warning" role="alert">
Note that this will remove the dist directory before build.
</div>

<p>Run the following command to run a build that uses the environment.prod.ts file and is a production build.   The environment name must match the file name for it to be valid.</p>
<pre><code class="lang-bash">ng build --target=production --environment=prod
</code></pre>
<div class="exercise-end"></div>

<h3 id="heroku">Heroku</h3>
<h4 class="exercise-start">
  <b>Exercise</b>: Heroku
</h4>

<div class="exercise-end"></div>

				</div>
				<hr>

				<div class="chapter">
					<h2 id="thank-you">Thank you</h2>
<p>I hope that you enjoyed going through this tutorial.  If you have any questions, please hit me up on twitter <a href="https://twitter.com/digitaldrummerj">@digitaldrummerj</a>.  </p>

				</div>
				<hr>
			</div>
		</div>
	</div>

	<script src="scripts/built.js"></script>

</body>

</html>
